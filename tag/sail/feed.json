{
    "version": "https://jsonfeed.org/version/1",
    "title": "雪漫城的风宅 • All posts by \"sail\" tag",
    "description": "この世界は好都合に未完成 だから知りたいんだ —— チ。-地球の運動について-",
    "home_page_url": "https://nightingalewk.cn",
    "items": [
        {
            "id": "https://nightingalewk.cn/2026/01/27/87.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%95%AA%E5%A4%96%E7%AF%87%EF%BC%9A%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/27/87.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%95%AA%E5%A4%96%E7%AF%87%EF%BC%9A%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（番外篇：工欲善其事）",
            "date_published": "2026-01-27T02:00:00.000Z",
            "content_html": "<h2 id=\"硬件选型参考-Hardware-Reference\"><a href=\"#硬件选型参考-Hardware-Reference\" class=\"headerlink\" title=\"硬件选型参考 (Hardware Reference)\"></a>硬件选型参考 (Hardware Reference)</h2><p>硬件部分是我自己正在使用的配置，可供参考。</p>\n<p><strong>Laravel Sail</strong> 基于 Docker 容器化架构，其对硬件资源（特别是内存与 I&#x2F;O）的需求显著高于传统集成环境。以下基于实际生产场景，提供不同层级的配置基准供选购参考。</p>\n<hr>\n<h2 id=\"1-生产力工作站-Workstation\"><a href=\"#1-生产力工作站-Workstation\" class=\"headerlink\" title=\"1. 生产力工作站 (Workstation)\"></a>1. 生产力工作站 (Workstation)</h2><p><em>适用场景</em>：重度开发、微服务架构、本地 LLM 运行、多项目并行。</p>\n<ul>\n<li><strong>CPU</strong>: Intel Xeon &#x2F; Core i9 &#x2F; AMD Ryzen 9 (多核性能优先)</li>\n<li><strong>RAM</strong>: 32GB ECC&#x2F;Non-ECC</li>\n<li><strong>Storage</strong>: NVMe SSD (Gen4&#x2F;Gen5)</li>\n<li><strong>OS</strong>: Windows 11 Pro for Workstations</li>\n</ul>\n<p><strong>技术分析</strong>：<br>32GB 内存是 Docker 下流畅运行复杂栈（如 PHP + MySQL + Redis + Meilisearch + Selenium）的<strong>推荐配置</strong>。充裕的内存允许 WSL2 保持较大的 Page Cache，显著减少磁盘 Swap 交换，提升容器冷启动速度。</p>\n<hr>\n<h2 id=\"2-主流开发配置-Standard-Desktop\"><a href=\"#2-主流开发配置-Standard-Desktop\" class=\"headerlink\" title=\"2. 主流开发配置 (Standard Desktop)\"></a>2. 主流开发配置 (Standard Desktop)</h2><p><em>适用场景</em>：标准全栈开发、常规 Laravel 项目。</p>\n<ul>\n<li><strong>CPU</strong>: Intel Core i7 &#x2F; AMD Ryzen 7</li>\n<li><strong>RAM</strong>: 16GB DDR4&#x2F;DDR5</li>\n<li><strong>Storage</strong>: NVMe SSD (512GB+)</li>\n</ul>\n<p><strong>技术分析</strong>：<br>16GB 内存是运行 Docker 开发环境的<strong>基准要求</strong>。在并发运行 1-2 个 Sail 项目时表现良好。建议在 <code>.wslconfig</code> 中限制 WSL2 最大内存占用（如 <code>memory=8GB</code>），以避免宿主机系统卡顿。</p>\n<hr>\n<h2 id=\"3-便携移动端-Portable\"><a href=\"#3-便携移动端-Portable\" class=\"headerlink\" title=\"3. 便携移动端 (Portable)\"></a>3. 便携移动端 (Portable)</h2><p><em>适用场景</em>：临时维护、远程办公、轻量级编码。</p>\n<ul>\n<li><strong>Device</strong>: Surface Pro &#x2F; MacBook Air &#x2F; XPS 13</li>\n<li><strong>Spec</strong>: Core i5&#x2F;i7 (Low Voltage) + 16GB RAM + SSD</li>\n</ul>\n<p><strong>技术分析</strong>：<br>对于轻薄本，<strong>SSD 性能是瓶颈所在</strong>。Docker 的 OverlayFS 对随机读写极其敏感。务必确保项目文件存储于 WSL2 内部文件系统，以规避跨系统文件协议（9P）带来的 I&#x2F;O 延迟。<br><em>Note: 不推荐在 8GB 内存设备上运行完整的 Docker 开发栈。</em></p>\n<hr>\n<h2 id=\"硬件选型总结\"><a href=\"#硬件选型总结\" class=\"headerlink\" title=\"硬件选型总结\"></a>硬件选型总结</h2><table>\n<thead>\n<tr>\n<th align=\"left\">组件</th>\n<th align=\"left\">关键指标</th>\n<th align=\"left\">建议</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><strong>内存 (RAM)</strong></td>\n<td align=\"left\">容量</td>\n<td align=\"left\"><strong>16GB (Min)</strong> &#x2F; **32GB (Rec)**。Docker 是内存密集型应用。</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>磁盘 (Storage)</strong></td>\n<td align=\"left\">I&#x2F;O 吞吐</td>\n<td align=\"left\">必选 **SSD (NVMe)**。HDD 机械硬盘不具备运行容器环境的可行性。</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>处理器 (CPU)</strong></td>\n<td align=\"left\">虚拟化</td>\n<td align=\"left\">必须支持并开启 <strong>VT-x &#x2F; AMD-V</strong>。多核优势大于单核高频。</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"4-全栈工具链-Software-Toolchain\"><a href=\"#4-全栈工具链-Software-Toolchain\" class=\"headerlink\" title=\"4. 全栈工具链 (Software Toolchain)\"></a>4. 全栈工具链 (Software Toolchain)</h2><p>高效的开发离不开标准化的工具栈。以下是推荐的现代化 PHP 全栈开发方案。</p>\n<h3 id=\"核心开发环境\"><a href=\"#核心开发环境\" class=\"headerlink\" title=\"核心开发环境\"></a>核心开发环境</h3><ul>\n<li><strong>IDE</strong>: <strong>Antigravity</strong> (配合 <strong>Gemini Advanced</strong>)<ul>\n<li><em>定位</em>：AI-Native 集成开发环境。利用大模型上下文理解能力实现代码生成与重构。</li>\n</ul>\n</li>\n<li><strong>DBMS</strong>: <strong>DBeaver Community</strong><ul>\n<li><em>定位</em>：通用数据库管理工具。支持 MySQL, PostgreSQL, Redis 等，开源且跨平台。</li>\n</ul>\n</li>\n<li><strong>Terminal</strong>: <strong>Windows Terminal</strong> &#x2F; <strong>Antigravity Integrated Terminal</strong><ul>\n<li><em>定位</em>：现代化终端仿真器。支持多 Tab、GPU 加速渲染及 WSL 集成。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"基础设施与运维\"><a href=\"#基础设施与运维\" class=\"headerlink\" title=\"基础设施与运维\"></a>基础设施与运维</h3><ul>\n<li><strong>SSH Client</strong>: <strong>Xshell &#x2F; Xftp</strong> (Free for Home&#x2F;School)<ul>\n<li><em>定位</em>：企业级终端模拟软件，连接稳定性优于开源替代品。</li>\n</ul>\n</li>\n<li><strong>Remote Desktop</strong>: <strong>ToDesk</strong><ul>\n<li><em>定位</em>：低延迟远程桌面控制，适用于远程协助或应急运维。</li>\n</ul>\n</li>\n<li><strong>Cloud Provider</strong>: <strong>Aliyun &#x2F; Tencent Cloud</strong> (Lightweight Server)<ul>\n<li><em>定位</em>：高性价比的测试&#x2F;预发布环境托管。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"协作与生产力\"><a href=\"#协作与生产力\" class=\"headerlink\" title=\"协作与生产力\"></a>协作与生产力</h3><ul>\n<li><strong>Knowledge Base</strong>: <strong>Microsoft OneNote</strong> (M365)<ul>\n<li><em>定位</em>：云同步笔记与技术文档归档。</li>\n</ul>\n</li>\n<li><strong>Diagramming</strong>: <strong>Diagrams.net (draw.io)</strong><ul>\n<li><em>定位</em>：基于 Web 的架构图&#x2F;ER 图绘制工具，支持 Git 存储后端。</li>\n</ul>\n</li>\n<li><strong>Project Management</strong>: <strong>PingCode</strong><ul>\n<li><em>定位</em>：敏捷研发项目管理系统。</li>\n</ul>\n</li>\n<li><strong>VCS</strong>: <strong>GitHub</strong> (Primary) &#x2F; <strong>Gitee</strong> (Mirror)<ul>\n<li><em>定位</em>：分布式版本控制与代码托管。</li>\n</ul>\n</li>\n<li><strong>Utility</strong>: <strong>Snipaste</strong> (截图&#x2F;贴图) &#x2F; <strong>Immersive Translate</strong> (沉浸式翻译)</li>\n</ul>\n<hr>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p><strong>工欲善其事，必先利其器</strong>。<br>标准化的硬件基准与现代化的软件工具链，是保障开发效率与代码质量的物理基础。希望这份清单能为团队的技术选型提供参考。</p>\n",
            "tags": [
                "Laravel",
                "Sail",
                "Hardware",
                "Tooling"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/26/86.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/26/86.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（疑难杂症篇）",
            "date_published": "2026-01-26T02:00:00.000Z",
            "content_html": "<h2 id=\"故障排查概览\"><a href=\"#故障排查概览\" class=\"headerlink\" title=\"故障排查概览\"></a>故障排查概览</h2><p>本文汇总了在 Windows (WSL2) + Docker 环境下运行 Laravel Sail 时可能遇到的高频问题。我们将从网络、资源、权限与性能四个维度进行分析与解决。</p>\n<hr>\n<h2 id=\"1-网络连接问题-Network-Connectivity\"><a href=\"#1-网络连接问题-Network-Connectivity\" class=\"headerlink\" title=\"1. 网络连接问题 (Network Connectivity)\"></a>1. 网络连接问题 (Network Connectivity)</h2><p>由于 Docker 镜像拉取及 Composer 依赖安装均需访问境外服务器，网络连接稳定性是环境部署的首要前提。</p>\n<p><strong>典型症状</strong>：</p>\n<ul>\n<li><code>curl</code> 安装脚本连接超时 (<code>Connection refused</code>)。</li>\n<li>Docker 镜像拉取速度极慢或卡顿。</li>\n<li>Composer 依赖安装失败。</li>\n</ul>\n<p><strong>解决方案</strong>：<br>建议在宿主机配置能够处理 TUN 流量的代理工具（如 v2rayN 开启 TUN 模式）。</p>\n<ul>\n<li><strong>原理</strong>：TUN 模式在网络层接管所有流量，能够自动代理 WSL2 及 Docker 容器发出的请求，无需单独配置复杂的 HTTP_PROXY 环境变量或 Docker 镜像源。</li>\n</ul>\n<hr>\n<h2 id=\"2-端口冲突-Port-Conflicts\"><a href=\"#2-端口冲突-Port-Conflicts\" class=\"headerlink\" title=\"2. 端口冲突 (Port Conflicts)\"></a>2. 端口冲突 (Port Conflicts)</h2><p>Docker 容器尝试绑定的宿主机端口已被占用。</p>\n<p><strong>典型症状</strong>：<br><code>sail up</code> 启动失败，报错：</p>\n<blockquote>\n<p><code>Error response from daemon: Ports are not available: listen tcp 0.0.0.0:80: bind: An attempt was made to access a socket in a way forbidden by its access permissions.</code></p>\n</blockquote>\n<p><strong>根本原因</strong>：<br>Sail 默认绑定端口：</p>\n<ul>\n<li>APP_PORT: 80 (常被 IIS, Apache, 或其他 Web 服务占用)</li>\n<li>MySQL: 3306 (常被本地 MySQL 服务占用)</li>\n</ul>\n<p><strong>解决方案</strong>：<br>修改项目根目录 <code>.env</code> 文件，重映射 Docker 端口：</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">APP_PORT</span>=<span class=\"number\">8000</span></span><br><span class=\"line\"><span class=\"attr\">FORWARD_DB_PORT</span>=<span class=\"number\">33060</span></span><br><span class=\"line\"><span class=\"attr\">FORWARD_REDIS_PORT</span>=<span class=\"number\">63790</span></span><br></pre></td></tr></table></figure>\n<p>重启服务生效：<code>sail up -d</code>。</p>\n<hr>\n<h2 id=\"3-I-O-性能严重下降-Slow-Performance\"><a href=\"#3-I-O-性能严重下降-Slow-Performance\" class=\"headerlink\" title=\"3. I&#x2F;O 性能严重下降 (Slow Performance)\"></a>3. I&#x2F;O 性能严重下降 (Slow Performance)</h2><p><strong>典型症状</strong>：<br>页面加载延迟极高（&gt;2s），文件读写缓慢。</p>\n<p><strong>根本原因</strong>：<br><strong>跨文件系统访问</strong>。若项目代码存放于 Windows 文件系统（如 <code>/mnt/c/Users/...</code>），WSL2 需通过 9P 协议进行跨跨系统文件读写，性能损耗巨大。</p>\n<p><strong>最佳实践</strong>：<br>务必将项目代码存储于 WSL2 原生文件系统中（如 <code>~/code</code> 或 <code>/var/www</code>）。</p>\n<ul>\n<li><em>错误路径</em>：<code>/mnt/c/Users/Admin/code/project</code></li>\n<li><em>正确路径</em>：<code>/home/Admin/code/project</code></li>\n</ul>\n<hr>\n<h2 id=\"4-文件权限问题-Permission-Denied\"><a href=\"#4-文件权限问题-Permission-Denied\" class=\"headerlink\" title=\"4. 文件权限问题 (Permission Denied)\"></a>4. 文件权限问题 (Permission Denied)</h2><p><strong>典型症状</strong>：<br>应用日志无法写入，或缓存文件生成失败。</p>\n<p><strong>根本原因</strong>：<br>如果在 WSL2 中使用 <code>root</code> 用户（或通过 <code>sudo</code>）执行了生成文件的命令，会导致文件所有者变为 <code>root</code>，而 Sail 容器内的 <code>sail</code> 用户（UID 1000）无权写入。</p>\n<p><strong>解决方案</strong>：</p>\n<ol>\n<li><strong>修复权限</strong>：使用 Sail 提供的辅助命令重置项目目录权限：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail root-shell <span class=\"built_in\">chown</span> -R sail:sail .</span><br></pre></td></tr></table></figure></li>\n<li><strong>预防措施</strong>：始终通过 <code>sail</code> 别名执行命令（如 <code>sail npm install</code>），避免直接使用 <code>sudo</code>。</li>\n</ol>\n<hr>\n<h2 id=\"5-外部数据库连接\"><a href=\"#5-外部数据库连接\" class=\"headerlink\" title=\"5. 外部数据库连接\"></a>5. 外部数据库连接</h2><p>若需使用宿主机的 GUI 工具（如 Navicat, TablePlus）连接容器数据库：</p>\n<ul>\n<li><strong>Host</strong>: <code>localhost</code> (Docker Desktop 会自动将端口转发至宿主机)</li>\n<li><strong>Port</strong>: <code>3306</code> (或 <code>.env</code> 中定义的 <code>FORWARD_DB_PORT</code>)</li>\n<li><strong>User</strong>: <code>sail</code></li>\n<li><strong>Password</strong>: <code>password</code> (或 <code>.env</code> 中定义的 <code>DB_PASSWORD</code>)</li>\n</ul>\n<hr>\n<h2 id=\"6-磁盘空间回收-Disk-Space-Reclamation\"><a href=\"#6-磁盘空间回收-Disk-Space-Reclamation\" class=\"headerlink\" title=\"6. 磁盘空间回收 (Disk Space Reclamation)\"></a>6. 磁盘空间回收 (Disk Space Reclamation)</h2><p>Docker Desktop 在 Windows 上使用 <code>ext4.vhdx</code> 虚拟磁盘文件存储数据。该文件具有“动态增长，但不自动缩容”的特性，长期使用可能导致占用大量磁盘空间。</p>\n<p><strong>解决方案：Purge Data</strong></p>\n<p>若需释放空间，可使用 Docker Desktop 自带的清理功能（注意：此操作将<strong>即时删除所有</strong>容器、镜像及数据卷）：</p>\n<ol>\n<li>打开 Docker Desktop -&gt; <strong>Troubleshoot</strong> (右上角甲虫图标)。</li>\n<li>选择 <strong>Clean &#x2F; Purge data</strong>。</li>\n<li>勾选 <strong>Disk image</strong> 并点击 Delete。</li>\n</ol>\n<p><strong>重建环境</strong>：<br>清理完成后，只需在 WSL2 项目目录中执行两步即可完全恢复环境：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 重新拉取镜像并启动</span></span><br><span class=\"line\">sail up -d</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. 重建数据库结构</span></span><br><span class=\"line\">sail artisan migrate:fresh --seed</span><br></pre></td></tr></table></figure>\n<p>这也体现了 <strong>Infrastructure as Code</strong> 的优势：开发环境是可被快速销毁并重建的。</p>\n<hr>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，<strong>《Laravel Sail 开发环境部署一把过》</strong> 系列的技术内容告一段落。<br>通过标准化、容器化的开发环境，我们消除了环境差异带来的不确定性。希望本系列能协助 Windows 开发者构建高效、稳定的 Laravel 工作流。</p>\n",
            "tags": [
                "Laravel",
                "Sail",
                "Troubleshooting"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/25/85.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/25/85.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（日常使用篇）",
            "date_published": "2026-01-25T02:00:00.000Z",
            "content_html": "<h2 id=\"容器化开发范式-Development-Paradigm\"><a href=\"#容器化开发范式-Development-Paradigm\" class=\"headerlink\" title=\"容器化开发范式 (Development Paradigm)\"></a>容器化开发范式 (Development Paradigm)</h2><p>迁移至 Sail 环境后，开发者的核心工作流将发生本质变化：<strong>从调用本机二进制文件转向调用容器内运行时</strong>。</p>\n<p>Sail 本质上封装了 <code>docker-compose exec</code> 指令。所有开发命令均应通过 <code>sail</code> 代理执行，以确保运行环境与生产环境（容器镜像）的高度一致性。</p>\n<p><strong>映射关系示例</strong>：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">本地命令 (Deprecated)</th>\n<th align=\"left\">容器化命令 (Recommended)</th>\n<th align=\"left\">执行上下文</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><code>php artisan ...</code></td>\n<td align=\"left\"><code>sail artisan ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 (PHP CLI)</td>\n</tr>\n<tr>\n<td align=\"left\"><code>composer ...</code></td>\n<td align=\"left\"><code>sail composer ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 (Composer)</td>\n</tr>\n<tr>\n<td align=\"left\"><code>npm run ...</code></td>\n<td align=\"left\"><code>sail npm run ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 (Node)</td>\n</tr>\n<tr>\n<td align=\"left\"><code>mysql</code></td>\n<td align=\"left\"><code>sail mysql</code></td>\n<td align=\"left\"><code>mysql</code> 容器</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"1-后端工作流：Artisan-Composer\"><a href=\"#1-后端工作流：Artisan-Composer\" class=\"headerlink\" title=\"1. 后端工作流：Artisan &amp; Composer\"></a>1. 后端工作流：Artisan &amp; Composer</h2><h3 id=\"1-1-Artisan-CLI\"><a href=\"#1-1-Artisan-CLI\" class=\"headerlink\" title=\"1.1 Artisan CLI\"></a>1.1 Artisan CLI</h3><p>在容器内执行 Artisan 命令，无需在宿主机配置 PHP 环境。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 生成资源 (Controller, Model, etc.)</span></span><br><span class=\"line\">sail artisan make:model Order -m</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 执行数据库迁移</span></span><br><span class=\"line\">sail artisan migrate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 开启队列监听</span></span><br><span class=\"line\">sail artisan queue:work</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-依赖管理-Composer\"><a href=\"#1-2-依赖管理-Composer\" class=\"headerlink\" title=\"1.2 依赖管理 (Composer)\"></a>1.2 依赖管理 (Composer)</h3><p>使用 Sail 管理依赖可解决 PHP 版本不匹配问题（例如宿主机 PHP 8.0 而项目需 PHP 8.2）。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装生产依赖</span></span><br><span class=\"line\">sail composer require guzzlehttp/guzzle</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装开发依赖</span></span><br><span class=\"line\">sail composer require laravel/pint --dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 执行自动加载优化</span></span><br><span class=\"line\">sail composer dump-autoload -o</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"2-前端工作流：Node-Vite\"><a href=\"#2-前端工作流：Node-Vite\" class=\"headerlink\" title=\"2. 前端工作流：Node &amp; Vite\"></a>2. 前端工作流：Node &amp; Vite</h2><p>Sail 默认集成了 Node.js 运行时，支持现代化的前端构建流程。这意味着宿主机也<strong>无需安装 Node&#x2F;NPM</strong>。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装前端依赖</span></span><br><span class=\"line\">sail npm install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 启动开发服务器 (HMR hot-reload enabled)</span></span><br><span class=\"line\">sail npm run dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 构建生产资源</span></span><br><span class=\"line\">sail npm run build</span><br></pre></td></tr></table></figure>\n\n<p>Sail 会自动处理 Docker 端口映射（默认 5173），确保 WSL2 中的 Vite Server 可被宿主机浏览器访问。</p>\n<hr>\n<h2 id=\"3-服务生命周期管理\"><a href=\"#3-服务生命周期管理\" class=\"headerlink\" title=\"3. 服务生命周期管理\"></a>3. 服务生命周期管理</h2><p>基于 Docker Compose 的服务治理。</p>\n<ul>\n<li><strong>启动服务栈</strong> (Detached Mode):<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail up -d</span><br></pre></td></tr></table></figure></li>\n<li><strong>停止服务栈</strong>:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail stop</span><br></pre></td></tr></table></figure></li>\n<li><strong>查看容器状态</strong>:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail ps</span><br></pre></td></tr></table></figure>\n<em>Output 示例</em>:<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NAME                    COMMAND                  STATUS              PORTS</span><br><span class=\"line\">example-app-laravel.test-1   &quot;start-container&quot;        Up                  0.0.0.0:80-&gt;80/tcp</span><br><span class=\"line\">example-app-mysql-1          &quot;docker-entrypoint...&quot;   Up                  0.0.0.0:3306-&gt;3306/tcp</span><br></pre></td></tr></table></figure></li>\n</ul>\n<hr>\n<h2 id=\"4-容器访问与调试\"><a href=\"#4-容器访问与调试\" class=\"headerlink\" title=\"4. 容器访问与调试\"></a>4. 容器访问与调试</h2><h3 id=\"4-1-Shell-Access\"><a href=\"#4-1-Shell-Access\" class=\"headerlink\" title=\"4.1 Shell Access\"></a>4.1 Shell Access</h3><p>在特定场景下（如检查日志、手动调试脚本），需直接进入容器 Shell：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 以 workspace 用户 (sail) 进入应用容器</span></span><br><span class=\"line\">sail shell</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 以 root 用户进入 (主要用于安装系统级依赖)</span></span><br><span class=\"line\">sail root-shell</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-2-临时站点共享-Expose\"><a href=\"#4-2-临时站点共享-Expose\" class=\"headerlink\" title=\"4.2 临时站点共享 (Expose)\"></a>4.2 临时站点共享 (Expose)</h3><p>基于 <code>ngrok</code> 或 <code>expose</code> 的隧道服务，将本地开发环境暴露至公网，便于 Webhook 调试或远程演示。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail share</span><br></pre></td></tr></table></figure>\n<p>执行后将获得一个 <code>http://&lt;random&gt;.sharedwithexpose.com</code> 的公网链接。</p>\n<hr>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>Sail 构建了一套完整的**容器化工具链 (Containerized Toolchain)**。通过简单的 CLI 封装，它屏蔽了 Docker 底层的复杂性，同时保留了容器化开发的所有优势：隔离、一致、可移植。</p>\n<p>在下一章《疑难杂症篇》中，我们将深入解决 Docker 环境下常见的运行时问题（网络、IO、权限）。</p>\n",
            "tags": [
                "Laravel",
                "Sail",
                "Artisan",
                "Composer"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/24/84.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88Git%20%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%9A%E6%9C%BA%E5%BC%80%E5%8F%91%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/24/84.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88Git%20%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%9A%E6%9C%BA%E5%BC%80%E5%8F%91%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（Git 同步与多机开发篇）",
            "date_published": "2026-01-24T02:00:00.000Z",
            "content_html": "<h2 id=\"协同工作流概述\"><a href=\"#协同工作流概述\" class=\"headerlink\" title=\"协同工作流概述\"></a>协同工作流概述</h2><p>在多设备（如公司工作站与家用 PC）间同步 Laravel Sail 项目时，核心挑战在于<strong>依赖的引导与恢复</strong>。<br>由于 <code>sail</code> 命令行脚本位于 <code>/vendor/bin</code> 目录下，而 <code>/vendor</code> 目录通常被 Git 忽略。这导致在新设备拉取代码后，因缺少 <code>vendor</code> 目录而无法直接调用 <code>sail</code> 命令启动环境，进而无法安装依赖——这是一个典型的死锁问题。</p>\n<p>本文将介绍标准化的多机协同方案，通过 Docker 临时容器完成依赖的**初始化引导 (Bootstrapping)**。</p>\n<hr>\n<h2 id=\"1-源代码提交-Source-Control\"><a href=\"#1-源代码提交-Source-Control\" class=\"headerlink\" title=\"1. 源代码提交 (Source Control)\"></a>1. 源代码提交 (Source Control)</h2><p>在首台设备（如初始化项目的机器）上，需确保 Git 忽略规则符合标准。Laravel 默认的 <code>.gitignore</code> 已包含 <code>/vendor</code> 与 <code>.env</code>，请遵循此规范，<strong>切勿</strong>将依赖包或敏感配置提交至版本控制系统。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 标准 Git 初始化流程</span></span><br><span class=\"line\">git init</span><br><span class=\"line\">git checkout -b main</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;feat: project init&quot;</span></span><br><span class=\"line\">git remote add origin &lt;repository_url&gt;</span><br><span class=\"line\">git push -u origin main</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"2-新环境拉取与依赖引导\"><a href=\"#2-新环境拉取与依赖引导\" class=\"headerlink\" title=\"2. 新环境拉取与依赖引导\"></a>2. 新环境拉取与依赖引导</h2><p>在第二台设备上，确保已部署好 WSL2 与 Docker Desktop 环境。</p>\n<h3 id=\"2-1-克隆代码\"><a href=\"#2-1-克隆代码\" class=\"headerlink\" title=\"2.1 克隆代码\"></a>2.1 克隆代码</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/code &amp;&amp; <span class=\"built_in\">cd</span> ~/code</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> &lt;repository_url&gt; project-name</span><br><span class=\"line\"><span class=\"built_in\">cd</span> project-name</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-依赖引导-Dependency-Bootstrapping\"><a href=\"#2-2-依赖引导-Dependency-Bootstrapping\" class=\"headerlink\" title=\"2.2 依赖引导 (Dependency Bootstrapping)\"></a>2.2 依赖引导 (Dependency Bootstrapping)</h3><p>此时无法直接运行 <code>sail up</code>。我们需要通过 Docker 运行一个一次性的 PHP 容器来执行 <code>composer install</code>。</p>\n<p>执行以下指令（Laravle 官方推荐方案）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --<span class=\"built_in\">rm</span> \\</span><br><span class=\"line\">    -u <span class=\"string\">&quot;<span class=\"subst\">$(id -u)</span>:<span class=\"subst\">$(id -g)</span>&quot;</span> \\</span><br><span class=\"line\">    -v <span class=\"string\">&quot;<span class=\"subst\">$(pwd)</span>:/var/www/html&quot;</span> \\</span><br><span class=\"line\">    -w /var/www/html \\</span><br><span class=\"line\">    laravelsail/php82-composer:latest \\</span><br><span class=\"line\">    composer install --ignore-platform-reqs</span><br></pre></td></tr></table></figure>\n\n<p><strong>指令解析</strong>：</p>\n<ul>\n<li><code>--rm</code>: 容器执行完毕后自动删除，不残留垃圾。</li>\n<li><code>-u &quot;$(id -u):$(id -g)&quot;</code>: 使用当前宿主机用户 ID 运行容器内进程，<strong>确保生成的 vendor 文件权限正确</strong>（避免 root 权限问题）。</li>\n<li><code>-v &quot;$(pwd):/var/www/html&quot;</code>: 将当前项目目录挂载至容器。</li>\n<li><code>laravelsail/php82-composer</code>: 使用包含 PHP 8.2 和 Composer 的专用镜像。</li>\n</ul>\n<p>执行完毕后，宿主机目录下将生成标准的 <code>vendor</code> 目录，此时 <code>sail</code> 脚本已就位。</p>\n<hr>\n<h2 id=\"3-环境配置与启动\"><a href=\"#3-环境配置与启动\" class=\"headerlink\" title=\"3. 环境配置与启动\"></a>3. 环境配置与启动</h2><h3 id=\"3-1-配置文件初始化\"><a href=\"#3-1-配置文件初始化\" class=\"headerlink\" title=\"3.1 配置文件初始化\"></a>3.1 配置文件初始化</h3><p>复制环境变量模版文件。注意：生产环境密钥或特定基础设施配置（如 AWS Keys）需单独配置，不应包含在仓库中。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cp</span> .env.example .<span class=\"built_in\">env</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-启动容器栈\"><a href=\"#3-2-启动容器栈\" class=\"headerlink\" title=\"3.2 启动容器栈\"></a>3.2 启动容器栈</h3><p>拥有 <code>vendor</code> 目录后，即可正常调用 Sail：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启动环境</span></span><br><span class=\"line\">sail up -d</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 生成应用密钥</span></span><br><span class=\"line\">sail artisan key:generate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 执行数据库迁移</span></span><br><span class=\"line\">sail artisan migrate</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"4-验证与总结\"><a href=\"#4-验证与总结\" class=\"headerlink\" title=\"4. 验证与总结\"></a>4. 验证与总结</h2><p>访问 <code>http://localhost</code> 确认服务运行正常。</p>\n<p>至此，我们建立了一套基于 <strong>Git + Docker Bootstrapping</strong> 的标准化工作流：</p>\n<ol>\n<li><strong>提交</strong>：仅提交业务代码与声明文件 (<code>composer.json</code>, <code>docker-compose.yml</code>).</li>\n<li><strong>拉取</strong>：在任意新设备获取代码。</li>\n<li><strong>引导</strong>：使用 <code>docker run</code> 引导安装依赖。</li>\n<li><strong>启动</strong>：使用 <code>sail up</code> 一键拉起完整环境。</li>\n</ol>\n<p>这种工作流确保了，无论在哪台设备，只要有 Docker，就能 100% 复刻出完全一致的开发环境。</p>\n",
            "tags": [
                "Git",
                "GitHub",
                "Laravel",
                "Sail"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/23/83.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/23/83.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（环境配置篇）",
            "date_published": "2026-01-23T10:00:00.000Z",
            "content_html": "<h2 id=\"部署目标\"><a href=\"#部署目标\" class=\"headerlink\" title=\"部署目标\"></a>部署目标</h2><p>本文将从零开始构建基于 <strong>WSL2 (Windows Subsystem for Linux 2)</strong> 的标准化 Docker 开发环境，并完成首个 Laravel Sail 项目的初始化。</p>\n<p><strong>环境要求</strong>：</p>\n<ul>\n<li><strong>OS</strong>: Windows 11 (Build 22000+) 或 Windows 10 (Build 19041+).</li>\n<li><strong>BIOS</strong>: 开启 CPU 虚拟化 (Virtualization Technology).</li>\n</ul>\n<hr>\n<h2 id=\"1-基础设施准备\"><a href=\"#1-基础设施准备\" class=\"headerlink\" title=\"1. 基础设施准备\"></a>1. 基础设施准备</h2><h3 id=\"1-1-验证虚拟化支持\"><a href=\"#1-1-验证虚拟化支持\" class=\"headerlink\" title=\"1.1 验证虚拟化支持\"></a>1.1 验证虚拟化支持</h3><p>Docker Desktop 依赖 Hypervisor 层支持。请确保 BIOS&#x2F;UEFI 中已开启虚拟化（Intel VT-x 或 AMD-V）。</p>\n<ul>\n<li><em>验证方式</em>：任务管理器 -&gt; 性能 -&gt; CPU -&gt; <strong>虚拟化：已启用</strong>。</li>\n</ul>\n<h3 id=\"1-2-部署-WSL2\"><a href=\"#1-2-部署-WSL2\" class=\"headerlink\" title=\"1.2 部署 WSL2\"></a>1.2 部署 WSL2</h3><p>使用管理员权限打开 PowerShell 或 Windows Terminal，执行以下指令完成 WSL2 及 Ubuntu 发行版的自动安装：</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wsl <span class=\"literal\">--install</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>Note</strong>: 安装完成后需<strong>重启系统</strong>。重启后会自动弹出终端窗口，按提示设置 UNIX 用户名与密码即可。</p>\n</blockquote>\n<h3 id=\"1-3-安装-Docker-Desktop\"><a href=\"#1-3-安装-Docker-Desktop\" class=\"headerlink\" title=\"1.3 安装 Docker Desktop\"></a>1.3 安装 Docker Desktop</h3><p>下载并安装 <a href=\"https://www.docker.com/products/docker-desktop/\">Docker Desktop for Windows</a>。</p>\n<p><strong>关键配置检查</strong>：<br>安装向导中务必勾选 <strong>Use WSL 2 instead of Hyper-V</strong>（通常为默认选中）。<br>启动后，进入 Settings -&gt; Resources -&gt; WSL Integration：</p>\n<ol>\n<li>确保 <strong>Enable integration with my default WSL distro</strong> 为开启状态。</li>\n<li>在下方 distro 列表中，确保 <strong>Ubuntu</strong> 处于开启状态。</li>\n</ol>\n<hr>\n<h2 id=\"2-初始化-Laravel-Sail-项目\"><a href=\"#2-初始化-Laravel-Sail-项目\" class=\"headerlink\" title=\"2. 初始化 Laravel Sail 项目\"></a>2. 初始化 Laravel Sail 项目</h2><p>所有后续操作建议直接在 WSL2 终端（Ubuntu）中执行，以获得原生的 Linux 开发体验。</p>\n<h3 id=\"2-1-创建工作区\"><a href=\"#2-1-创建工作区\" class=\"headerlink\" title=\"2.1 创建工作区\"></a>2.1 创建工作区</h3><p>建议在 WSL 用户主目录下统一管理项目，避免 Windows 文件系统 (NTFS) 挂载带来的 I&#x2F;O 性能损耗。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/code &amp;&amp; <span class=\"built_in\">cd</span> ~/code</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-构建项目\"><a href=\"#2-2-构建项目\" class=\"headerlink\" title=\"2.2 构建项目\"></a>2.2 构建项目</h3><p>使用 Laravel 官方构建脚本初始化项目（通过临时 Docker 容器）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 请将 &#x27;example-app&#x27; 替换为实际项目名</span></span><br><span class=\"line\">curl -s https://laravel.build/example-app | bash</span><br></pre></td></tr></table></figure>\n\n<p>该指令会自动拉取 <code>php-cli</code> 镜像及相关依赖。</p>\n<h3 id=\"2-3-配置-Shell-Alias-推荐\"><a href=\"#2-3-配置-Shell-Alias-推荐\" class=\"headerlink\" title=\"2.3 配置 Shell Alias (推荐)\"></a>2.3 配置 Shell Alias (推荐)</h3><p>为简化操作，建议将 <code>sail</code> 执行脚本映射为 Shell 别名。编辑 <code>~/.bashrc</code> 或 <code>~/.zshrc</code>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 添加至配置文件末尾</span></span><br><span class=\"line\"><span class=\"built_in\">alias</span> sail=<span class=\"string\">&#x27;[ -f sail ] &amp;&amp; bash sail || bash vendor/bin/sail&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>加载生效：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"3-启动与验证\"><a href=\"#3-启动与验证\" class=\"headerlink\" title=\"3. 启动与验证\"></a>3. 启动与验证</h2><h3 id=\"3-1-启动环境\"><a href=\"#3-1-启动环境\" class=\"headerlink\" title=\"3.1 启动环境\"></a>3.1 启动环境</h3><p>进入项目目录并后台启动 Sail 服务栈：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/code/example-app</span><br><span class=\"line\">sail up -d</span><br></pre></td></tr></table></figure>\n\n<p>Sail 将根据 <code>docker-compose.yml</code>编排启动 PHP、MySQL、Redis 等容器。首次启动涉及镜像拉取，耗时取决于网络环境。</p>\n<h3 id=\"3-2-服务验证\"><a href=\"#3-2-服务验证\" class=\"headerlink\" title=\"3.2 服务验证\"></a>3.2 服务验证</h3><p>服务启动后，通过宿主机浏览器访问 <code>http://localhost</code>。<br>若显示 Laravel 欢迎页，即表示：</p>\n<ul>\n<li>✅ Docker 容器运行正常</li>\n<li>✅ 端口转发 (Port Forwarding) 正常</li>\n<li>✅ PHP 运行时挂载正常</li>\n</ul>\n<hr>\n<h2 id=\"下一步\"><a href=\"#下一步\" class=\"headerlink\" title=\"下一步\"></a>下一步</h2><p>基础环境已就绪。下一章节我们将讨论<strong>多端协作场景</strong>：如何基于 Git 管理代码，并在不同设备间实现无缝的依赖引导与环境同步。</p>\n",
            "tags": [
                "Laravel",
                "Docker",
                "Sail",
                "WSL2"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/22/82.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E4%BB%8B%E7%BB%8D%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/22/82.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E4%BB%8B%E7%BB%8D%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（介绍篇）",
            "date_published": "2026-01-22T06:00:00.000Z",
            "content_html": "<blockquote>\n<p><strong>⚠️ 前置要求</strong></p>\n<p><strong>本系列涉及的技术栈（Docker, WSL2, Composer）依赖稳定的国际互联网连接。</strong><br>如果无法解决网络访问问题（如 Docker Hub 镜像拉取），这套方案将难以实施。建议优先解决网络层设施，或退而求其次选择传统集成环境。<br>（网络解决方案详见系列第五篇《疑难杂症篇》）</p>\n</blockquote>\n<h2 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h2><p>在 Windows 平台搭建标准的 PHP 开发环境，历来有多种技术选型。从早期的集成包（XAMPP&#x2F;WAMP），到国产面板（PhpStudy&#x2F;宝塔），再到完全虚拟化（Vagrant&#x2F;Homestead）。每种方案在解决特定问题的同时，也引入了新的维护成本：</p>\n<ul>\n<li><strong>集成环境</strong>：安装便捷，但环境版本耦合严重，配置（如 php.ini）管理混乱，且会对宿主机注册大量系统服务，造成“环境污染”。</li>\n<li><strong>虚拟机</strong>：实现了隔离，但系统资源开销大，启动缓慢，且文件系统同步（I&#x2F;O）性能始终是瓶颈。</li>\n<li><strong>本机原生安装</strong>：依赖手动管理 PHP 系统路径和扩展，多版本共存（e.g., Maintain PHP 7.4 Legacy &amp; PHP 8.2 New Project）维护极其繁琐。</li>\n</ul>\n<p>本系列文章旨在为 Windows (WSL2) 用户提供一套基于 <strong>Laravel Sail</strong> 的现代化开发环境最佳实践，涵盖从环境初始化到团队协作的全流程。</p>\n<h3 id=\"系列大纲\"><a href=\"#系列大纲\" class=\"headerlink\" title=\"系列大纲\"></a>系列大纲</h3><ol>\n<li><strong>介绍篇（本文）</strong>：架构原理解析与技术选型优势。</li>\n<li><strong>环境配置篇</strong>：WSL2、Docker Desktop 安装及 Sail 项目初始化。</li>\n<li><strong>Git 同步与多机开发篇</strong>：基于 Docker 临时容器的依赖引导与多端同步。</li>\n<li><strong>日常使用篇</strong>：Sail CLI 命令映射、服务管理与 Shell 常用技巧。</li>\n<li><strong>疑难杂症篇</strong>：常见网络、端口、权限及性能问题排查。</li>\n<li><strong>番外篇</strong>：开发设备选型与全栈工具链参考。</li>\n</ol>\n<hr>\n<h2 id=\"什么是-Laravel-Sail？\"><a href=\"#什么是-Laravel-Sail？\" class=\"headerlink\" title=\"什么是 Laravel Sail？\"></a>什么是 Laravel Sail？</h2><p>在进入实操前，需明确其核心组件与设计理念。</p>\n<h3 id=\"1-框架层：Laravel\"><a href=\"#1-框架层：Laravel\" class=\"headerlink\" title=\"1. 框架层：Laravel\"></a>1. 框架层：Laravel</h3><p>作为 PHP 生态中最主流的 Web 框架，Laravel 强调 **Convention over Configuration (约定优于配置)**。这一理念使得代码结构具有高度的可预测性，不仅利于团队协作，也使得当前的 AI 辅助编程工具（如 Copilot, Gemini）能更准确地理解上下文并生成高质量代码。</p>\n<h3 id=\"2-容器层：Docker\"><a href=\"#2-容器层：Docker\" class=\"headerlink\" title=\"2. 容器层：Docker\"></a>2. 容器层：Docker</h3><p>Docker 提供了独立于宿主机的运行环境。在 Docker 架构中，应用及其依赖（Runtime, Database, Cache）被封装为标准化的**容器 (Container)**。这实现了“用完即焚”的轻量化管理，从根本上解决了环境残留问题。</p>\n<h3 id=\"3-本地编排：Laravel-Sail\"><a href=\"#3-本地编排：Laravel-Sail\" class=\"headerlink\" title=\"3. 本地编排：Laravel Sail\"></a>3. 本地编排：Laravel Sail</h3><p>虽然 Docker 强大，但编写和维护 <code>Dockerfile</code> 与 <code>docker-compose.yml</code> 具有一定的学习曲线。<br><strong>Laravel Sail 是 Laravel 官方提供的轻量级 CLI 接口</strong>，用于与 Docker 开发环境进行交互。</p>\n<p>它本质上是对 docker-compose 的封装。开发者无需手动执行复杂的 Docker 指令，只需通过简单的 <code>sail</code> 命令即可管理包含 PHP, MySQL, Redis 等服务的完整技术栈。</p>\n<hr>\n<h2 id=\"为什么选择-Sail？\"><a href=\"#为什么选择-Sail？\" class=\"headerlink\" title=\"为什么选择 Sail？\"></a>为什么选择 Sail？</h2><p>在众多方案中推荐 Sail，主要基于以下技术考量：</p>\n<h3 id=\"1-彻底的环境隔离-Isolation\"><a href=\"#1-彻底的环境隔离-Isolation\" class=\"headerlink\" title=\"1. 彻底的环境隔离 (Isolation)\"></a>1. 彻底的环境隔离 (Isolation)</h3><p>这是现代化开发环境的核心诉求。<br>在 Sail 架构下，<strong>宿主机（Host OS）无需安装 PHP、Composer、Node.js 或 MySQL</strong>。所有运行时均托管于 Docker 容器内。</p>\n<ul>\n<li><strong>多版本并行</strong>：可同时运行基于不同 PHP 版本的项目，容器间网络与文件系统互不干扰。</li>\n<li><strong>零污染</strong>：开发服务不占用本地系统服务资源，容器停止后，宿主机保持纯净。</li>\n<li><strong>高容错</strong>：环境配置失误仅影响容器本身，通过重建容器即可快速恢复。</li>\n</ul>\n<h3 id=\"2-Infrastructure-as-Code-IaC-与环境一致性\"><a href=\"#2-Infrastructure-as-Code-IaC-与环境一致性\" class=\"headerlink\" title=\"2. Infrastructure as Code (IaC) 与环境一致性\"></a>2. Infrastructure as Code (IaC) 与环境一致性</h3><p>“Look, it works on my machine” 是团队协作中的典型低效场景，通常源于本地扩展、库版本或配置文件的细微差异。<br>Sail 项目根目录下的 <code>docker-compose.yml</code> 显式定义了环境拓扑。<strong>代码库即环境</strong>。新成员拉取代码后，只需执行启动命令，即可获得与 CI&#x2F;CD 管道及生产环境高度一致的运行环境，显著降低了 Onboarding 成本。</p>\n<h3 id=\"3-官方原生支持\"><a href=\"#3-官方原生支持\" class=\"headerlink\" title=\"3. 官方原生支持\"></a>3. 官方原生支持</h3><p>作为框架的一等公民（First-party Integration）：</p>\n<ul>\n<li>预置了适配 Laravel 的 <code>php.ini</code> 配置。</li>\n<li>集成了 Node&#x2F;NPM 及 Vite 热更新支持。</li>\n<li>内置了常用 PHP 扩展（BCMath, Intl, GD 等）及辅助服务（Mailpit, Selenium）。</li>\n</ul>\n<p>官方维护保证了环境镜像的安全性与更新及时性。</p>\n<h3 id=\"4-针对性优化\"><a href=\"#4-针对性优化\" class=\"headerlink\" title=\"4. 针对性优化\"></a>4. 针对性优化</h3><p>尽管 Docker on Windows 体验已大幅提升，但在文件系统（NTFS vs ext4）和网络层面仍存在特定坑点。本系列将针对国内网络环境及 WSL2 的 I&#x2F;O 性能特性，提供经过验证的最佳实践配置。</p>\n<hr>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>对于追求工程标准化的 Laravel 开发者，<strong>Laravel Sail + WSL2 + Docker</strong> 是目前 Windows 平台上最符合业界标准的开发环境方案。</p>\n<p>下一章我们将进入实施阶段，完成基础环境的搭建。</p>\n",
            "tags": [
                "Laravel",
                "Sail"
            ]
        }
    ]
}