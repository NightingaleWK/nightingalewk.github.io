{
    "version": "https://jsonfeed.org/version/1",
    "title": "雪漫城的风宅 • All posts by \"laravel\" tag",
    "description": "この世界は好都合に未完成 だから知りたいんだ —— チ。-地球の運動について-",
    "home_page_url": "https://nightingalewk.cn",
    "items": [
        {
            "id": "https://nightingalewk.cn/2026/01/27/87.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%95%AA%E5%A4%96%E7%AF%87%EF%BC%9A%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/27/87.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%95%AA%E5%A4%96%E7%AF%87%EF%BC%9A%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（番外篇：工欲善其事）",
            "date_published": "2026-01-27T02:00:00.000Z",
            "content_html": "<h2 id=\"硬件选型参考-（Hardware-Reference）\"><a href=\"#硬件选型参考-（Hardware-Reference）\" class=\"headerlink\" title=\"硬件选型参考 （Hardware Reference）\"></a>硬件选型参考 （Hardware Reference）</h2><p>硬件部分是我自己正在使用的配置，可供参考。</p>\n<p><strong>Laravel Sail</strong> 基于 Docker 容器化架构，其对硬件资源（特别是内存与 I&#x2F;O）的需求显著高于传统集成环境。以下基于实际生产场景，提供不同层级的配置基准供选购参考。</p>\n<hr>\n<h2 id=\"1-生产力工作站-（Workstation）\"><a href=\"#1-生产力工作站-（Workstation）\" class=\"headerlink\" title=\"1. 生产力工作站 （Workstation）\"></a>1. 生产力工作站 （Workstation）</h2><p><em>适用场景</em>：重度开发、微服务架构、本地 LLM 运行、多项目并行。</p>\n<ul>\n<li><strong>CPU</strong>: Intel Xeon &#x2F; Core i9 &#x2F; AMD Ryzen 9 （多核性能优先）</li>\n<li><strong>RAM</strong>: 32GB ECC&#x2F;Non-ECC</li>\n<li><strong>Storage</strong>: NVMe SSD （Gen4&#x2F;Gen5）</li>\n<li><strong>OS</strong>: Windows 11 Pro for Workstations</li>\n</ul>\n<p><strong>技术分析</strong>：<br>32GB 内存是 Docker 下流畅运行复杂栈（如 PHP + MySQL + Redis + Meilisearch + Selenium）的<strong>推荐配置</strong>。充裕的内存允许 WSL2 保持较大的 Page Cache，显著减少磁盘 Swap 交换，提升容器冷启动速度。</p>\n<hr>\n<h2 id=\"2-主流开发配置-（Standard-Desktop）\"><a href=\"#2-主流开发配置-（Standard-Desktop）\" class=\"headerlink\" title=\"2. 主流开发配置 （Standard Desktop）\"></a>2. 主流开发配置 （Standard Desktop）</h2><p><em>适用场景</em>：标准全栈开发、常规 Laravel 项目。</p>\n<ul>\n<li><strong>CPU</strong>: Intel Core i7 &#x2F; AMD Ryzen 7</li>\n<li><strong>RAM</strong>: 16GB DDR4&#x2F;DDR5</li>\n<li><strong>Storage</strong>: NVMe SSD （512GB+）</li>\n</ul>\n<p><strong>技术分析</strong>：<br>16GB 内存是运行 Docker 开发环境的<strong>基准要求</strong>。在并发运行 1-2 个 Sail 项目时表现良好。建议在 <code>.wslconfig</code> 中限制 WSL2 最大内存占用（如 <code>memory=8GB</code>），以避免宿主机系统卡顿。</p>\n<hr>\n<h2 id=\"3-便携移动端-（Portable）\"><a href=\"#3-便携移动端-（Portable）\" class=\"headerlink\" title=\"3. 便携移动端 （Portable）\"></a>3. 便携移动端 （Portable）</h2><p><em>适用场景</em>：临时维护、远程办公、轻量级编码。</p>\n<ul>\n<li><strong>Device</strong>: Surface Pro &#x2F; MacBook Air &#x2F; XPS 13</li>\n<li><strong>Spec</strong>: Core i5&#x2F;i7 （Low Voltage） + 16GB RAM + SSD</li>\n</ul>\n<p><strong>技术分析</strong>：<br>对于轻薄本，<strong>SSD 性能是瓶颈所在</strong>。Docker 的 OverlayFS 对随机读写极其敏感。务必确保项目文件存储于 WSL2 内部文件系统，以规避跨系统文件协议（9P）带来的 I&#x2F;O 延迟。<br><em>Note: 不推荐在 8GB 内存设备上运行完整的 Docker 开发栈。</em></p>\n<hr>\n<h2 id=\"硬件选型总结\"><a href=\"#硬件选型总结\" class=\"headerlink\" title=\"硬件选型总结\"></a>硬件选型总结</h2><table>\n<thead>\n<tr>\n<th align=\"left\">组件</th>\n<th align=\"left\">关键指标</th>\n<th align=\"left\">建议</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><strong>内存 （RAM）</strong></td>\n<td align=\"left\">容量</td>\n<td align=\"left\"><strong>16GB （Min）</strong> &#x2F; <strong>32GB （Rec）</strong>。Docker 是内存密集型应用。</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>磁盘 （Storage）</strong></td>\n<td align=\"left\">I&#x2F;O 吞吐</td>\n<td align=\"left\">必选 <strong>SSD （NVMe）</strong>。HDD 机械硬盘不具备运行容器环境的可行性。</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>处理器 （CPU）</strong></td>\n<td align=\"left\">虚拟化</td>\n<td align=\"left\">必须支持并开启 <strong>VT-x &#x2F; AMD-V</strong>。多核优势大于单核高频。</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"4-全栈工具链-（Software-Toolchain）\"><a href=\"#4-全栈工具链-（Software-Toolchain）\" class=\"headerlink\" title=\"4. 全栈工具链 （Software Toolchain）\"></a>4. 全栈工具链 （Software Toolchain）</h2><p>高效的开发离不开标准化的工具栈。以下是推荐的现代化 PHP 全栈开发方案。</p>\n<h3 id=\"核心开发环境\"><a href=\"#核心开发环境\" class=\"headerlink\" title=\"核心开发环境\"></a>核心开发环境</h3><ul>\n<li><strong>IDE</strong>: <strong>Antigravity</strong> （配合 <strong>Gemini Advanced</strong>）<ul>\n<li><em>定位</em>：AI-Native 集成开发环境。利用大模型上下文理解能力实现代码生成与重构。</li>\n</ul>\n</li>\n<li><strong>DBMS</strong>: <strong>DBeaver Community</strong><ul>\n<li><em>定位</em>：通用数据库管理工具。支持 MySQL, PostgreSQL, Redis 等，开源且跨平台。</li>\n</ul>\n</li>\n<li><strong>Terminal</strong>: <strong>Windows Terminal</strong> &#x2F; <strong>Antigravity Integrated Terminal</strong><ul>\n<li><em>定位</em>：现代化终端仿真器。支持多 Tab、GPU 加速渲染及 WSL 集成。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"基础设施与运维\"><a href=\"#基础设施与运维\" class=\"headerlink\" title=\"基础设施与运维\"></a>基础设施与运维</h3><ul>\n<li><strong>SSH Client</strong>: <strong>Xshell &#x2F; Xftp</strong> （Free for Home&#x2F;School）<ul>\n<li><em>定位</em>：企业级终端模拟软件，连接稳定性优于开源替代品。</li>\n</ul>\n</li>\n<li><strong>Remote Desktop</strong>: <strong>ToDesk</strong><ul>\n<li><em>定位</em>：低延迟远程桌面控制，适用于远程协助或应急运维。</li>\n</ul>\n</li>\n<li><strong>Cloud Provider</strong>: <strong>Aliyun &#x2F; Tencent Cloud</strong> （Lightweight Server）<ul>\n<li><em>定位</em>：高性价比的测试&#x2F;预发布环境托管。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"协作与生产力\"><a href=\"#协作与生产力\" class=\"headerlink\" title=\"协作与生产力\"></a>协作与生产力</h3><ul>\n<li><strong>Knowledge Base</strong>: <strong>Microsoft OneNote</strong> （M365）<ul>\n<li><em>定位</em>：云同步笔记与技术文档归档。</li>\n</ul>\n</li>\n<li><strong>Diagramming</strong>: <strong>Diagrams.net （draw.io）</strong><ul>\n<li><em>定位</em>：基于 Web 的架构图&#x2F;ER 图绘制工具，支持 Git 存储后端。</li>\n</ul>\n</li>\n<li><strong>Project Management</strong>: <strong>PingCode</strong><ul>\n<li><em>定位</em>：敏捷研发项目管理系统。</li>\n</ul>\n</li>\n<li><strong>VCS</strong>: <strong>GitHub</strong> （Primary） &#x2F; <strong>Gitee</strong> （Mirror）<ul>\n<li><em>定位</em>：分布式版本控制与代码托管。</li>\n</ul>\n</li>\n<li><strong>Utility</strong>: <strong>Snipaste</strong> （截图&#x2F;贴图） &#x2F; <strong>Immersive Translate</strong> （沉浸式翻译）</li>\n</ul>\n<hr>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p><strong>工欲善其事，必先利其器</strong>。<br>标准化的硬件基准与现代化的软件工具链，是保障开发效率与代码质量的物理基础。希望这份清单能为团队的技术选型提供参考。</p>\n",
            "tags": [
                "Laravel",
                "Sail",
                "Hardware",
                "Tooling"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/26/86.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/26/86.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（疑难杂症篇）",
            "date_published": "2026-01-26T02:00:00.000Z",
            "content_html": "<h2 id=\"故障排查概览\"><a href=\"#故障排查概览\" class=\"headerlink\" title=\"故障排查概览\"></a>故障排查概览</h2><p>本文汇总了在 Windows （WSL2） + Docker 环境下运行 Laravel Sail 时可能遇到的高频问题。我们将从网络、资源、权限与性能四个维度进行分析与解决。</p>\n<hr>\n<h2 id=\"1-网络连接问题\"><a href=\"#1-网络连接问题\" class=\"headerlink\" title=\"1. 网络连接问题\"></a>1. 网络连接问题</h2><p>由于 Docker 镜像拉取及 Composer 依赖安装均需访问境外服务器，网络连接稳定性是环境部署的首要前提。</p>\n<p><strong>典型症状</strong>：</p>\n<ul>\n<li><code>curl</code> 安装脚本连接超时 （<code>Connection refused</code>）。</li>\n<li>Docker 镜像拉取速度极慢或卡顿。</li>\n<li>Composer 依赖安装失败。</li>\n</ul>\n<p><strong>解决方案</strong>：<br>建议在宿主机配置能够处理 TUN 流量的代理工具（如 v2rayN 开启 TUN 模式）。</p>\n<ul>\n<li><strong>原理</strong>：TUN 模式在网络层接管所有流量，能够自动代理 WSL2 及 Docker 容器发出的请求，无需单独配置复杂的 HTTP_PROXY 环境变量或 Docker 镜像源。</li>\n</ul>\n<hr>\n<h2 id=\"2-端口冲突\"><a href=\"#2-端口冲突\" class=\"headerlink\" title=\"2. 端口冲突\"></a>2. 端口冲突</h2><p>Docker 容器尝试绑定的宿主机端口已被占用。</p>\n<p><strong>典型症状</strong>：<br><code>sail up</code> 启动失败，报错：</p>\n<blockquote>\n<p><code>Error response from daemon: Ports are not available: listen tcp 0.0.0.0:80: bind: An attempt was made to access a socket in a way forbidden by its access permissions.</code></p>\n</blockquote>\n<p><strong>根本原因</strong>：<br>Sail 默认绑定端口：</p>\n<ul>\n<li>APP_PORT: 80 （常被 IIS, Apache, 或其他 Web 服务占用）</li>\n<li>MySQL: 3306 （常被本地 MySQL 服务占用）</li>\n</ul>\n<p><strong>解决方案</strong>：<br>修改项目根目录 <code>.env</code> 文件，重映射 Docker 端口：</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">APP_PORT</span>=<span class=\"number\">8000</span></span><br><span class=\"line\"><span class=\"attr\">FORWARD_DB_PORT</span>=<span class=\"number\">33060</span></span><br><span class=\"line\"><span class=\"attr\">FORWARD_REDIS_PORT</span>=<span class=\"number\">63790</span></span><br></pre></td></tr></table></figure>\n<p>重启服务生效：<code>sail up -d</code>。</p>\n<hr>\n<h2 id=\"3-I-O-性能严重下降\"><a href=\"#3-I-O-性能严重下降\" class=\"headerlink\" title=\"3. I&#x2F;O 性能严重下降\"></a>3. I&#x2F;O 性能严重下降</h2><p><strong>典型症状</strong>：<br>页面加载延迟极高（&gt;2s），文件读写缓慢。</p>\n<p><strong>根本原因</strong>：<br><strong>跨文件系统访问</strong>。若项目代码存放于 Windows 文件系统（如 <code>/mnt/c/Users/...</code>），WSL2 需通过 9P 协议进行跨系统文件读写，性能损耗巨大。</p>\n<p><strong>最佳实践</strong>：<br>务必将项目代码存储于 WSL2 原生文件系统中（如 <code>~/code</code> 或 <code>/var/www</code>）。</p>\n<ul>\n<li><em>错误路径</em>：<code>/mnt/c/Users/code/project</code></li>\n<li><em>正确路径</em>：<code>/home/code/project</code></li>\n</ul>\n<hr>\n<h2 id=\"4-文件权限问题\"><a href=\"#4-文件权限问题\" class=\"headerlink\" title=\"4. 文件权限问题\"></a>4. 文件权限问题</h2><p><strong>典型症状</strong>：<br>应用日志无法写入，或缓存文件生成失败。</p>\n<p><strong>根本原因</strong>：<br>如果在 WSL2 中使用 <code>root</code> 用户（或者通过 <code>sudo</code>）执行了生成文件的命令，会导致文件所有者变为 <code>root</code>，而 Sail 容器内的 <code>sail</code> 用户（UID 1000）无权写入。</p>\n<p><strong>解决方案</strong>：</p>\n<ol>\n<li><strong>修复权限</strong>：使用 Sail 提供的辅助命令重置项目目录权限：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail root-shell <span class=\"built_in\">chown</span> -R sail:sail .</span><br></pre></td></tr></table></figure></li>\n<li><strong>预防措施</strong>：始终通过 <code>sail</code> 别名执行命令（如 <code>sail npm install</code>），避免直接使用 <code>sudo</code>。</li>\n</ol>\n<hr>\n<h2 id=\"5-外部数据库连接\"><a href=\"#5-外部数据库连接\" class=\"headerlink\" title=\"5. 外部数据库连接\"></a>5. 外部数据库连接</h2><p>若需使用宿主机的 GUI 工具（如 Navicat, TablePlus）连接容器数据库：</p>\n<ul>\n<li><strong>Host</strong>: <code>localhost</code> （Docker Desktop 会自动将端口转发至宿主机）</li>\n<li><strong>Port</strong>: <code>3306</code> （或 <code>.env</code> 中定义的 <code>FORWARD_DB_PORT</code>）</li>\n<li><strong>User</strong>: <code>sail</code></li>\n<li><strong>Password</strong>: <code>password</code> （或 <code>.env</code> 中定义的 <code>DB_PASSWORD</code>）</li>\n</ul>\n<hr>\n<h2 id=\"6-磁盘空间回收\"><a href=\"#6-磁盘空间回收\" class=\"headerlink\" title=\"6. 磁盘空间回收\"></a>6. 磁盘空间回收</h2><p>Docker Desktop 在 Windows 上使用 <code>ext4.vhdx</code> 虚拟磁盘文件存储数据。该文件具有“动态增长，但不自动缩容”的特性，长期使用可能导致占用大量磁盘空间。</p>\n<p><strong>解决方案：Purge Data</strong></p>\n<p>若需释放空间，可使用 Docker Desktop 自带的清理功能（注意：此操作将<strong>即时删除所有</strong>容器、镜像及数据卷）：</p>\n<ol>\n<li>打开 Docker Desktop -&gt; <strong>Troubleshoot</strong> （左下角启停按钮跟前的三个点的列表中）。</li>\n<li>选择 <strong>Clean &#x2F; Purge data</strong>。</li>\n<li>勾选 <strong>Disk image</strong> 并点击 Delete。</li>\n</ol>\n<p><strong>重建环境</strong>：<br>清理完成后，只需在 WSL2 项目目录中执行两步即可完全恢复环境：</p>\n<p>当然，若此过程进展不顺利，您大可放心删除 docker desktop，重新安装即可。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 重新拉取镜像并启动</span></span><br><span class=\"line\">sail up -d</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. 重建数据库结构</span></span><br><span class=\"line\">sail artisan migrate:fresh --seed</span><br></pre></td></tr></table></figure>\n<p>这也体现了 <strong>Infrastructure as Code</strong> 的优势：开发环境是可被快速销毁并重建的。</p>\n<hr>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，<strong>《Laravel Sail 开发环境部署一把过》</strong> 系列的技术内容告一段落。<br>通过标准化、容器化的开发环境，我们消除了环境差异带来的不确定性。希望本系列能协助 Windows 开发者构建高效、稳定的 Laravel 工作流。</p>\n",
            "tags": [
                "Laravel",
                "Sail",
                "Troubleshooting"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/25/85.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/25/85.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（日常使用篇）",
            "date_published": "2026-01-25T02:00:00.000Z",
            "content_html": "<h2 id=\"容器化开发范式-（Development-Paradigm）\"><a href=\"#容器化开发范式-（Development-Paradigm）\" class=\"headerlink\" title=\"容器化开发范式 （Development Paradigm）\"></a>容器化开发范式 （Development Paradigm）</h2><p>迁移至 Sail 环境后，开发者的核心工作流将发生本质变化：<strong>从调用本机二进制文件转向调用容器内运行时</strong>。</p>\n<p>Sail 本质上封装了 <code>docker-compose exec</code> 指令。所有开发命令均应通过 <code>sail</code> 代理执行，以确保运行环境与生产环境（容器镜像）的高度一致性。</p>\n<p><strong>映射关系示例</strong>：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">本地命令 （Deprecated）</th>\n<th align=\"left\">容器化命令 （Recommended）</th>\n<th align=\"left\">执行上下文</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><code>php artisan ...</code></td>\n<td align=\"left\"><code>sail artisan ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 （PHP CLI）</td>\n</tr>\n<tr>\n<td align=\"left\"><code>composer ...</code></td>\n<td align=\"left\"><code>sail composer ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 （Composer）</td>\n</tr>\n<tr>\n<td align=\"left\"><code>npm run ...</code></td>\n<td align=\"left\"><code>sail npm run ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 （Node）</td>\n</tr>\n<tr>\n<td align=\"left\"><code>mysql</code></td>\n<td align=\"left\"><code>sail mysql</code></td>\n<td align=\"left\"><code>mysql</code> 容器</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"1-后端工作流：Artisan-Composer\"><a href=\"#1-后端工作流：Artisan-Composer\" class=\"headerlink\" title=\"1. 后端工作流：Artisan &amp; Composer\"></a>1. 后端工作流：Artisan &amp; Composer</h2><h3 id=\"1-1-Artisan-CLI\"><a href=\"#1-1-Artisan-CLI\" class=\"headerlink\" title=\"1.1 Artisan CLI\"></a>1.1 Artisan CLI</h3><p>在容器内执行 Artisan 命令，无需在宿主机配置 PHP 环境。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 生成资源 （Controller, Model, etc.）</span></span><br><span class=\"line\">sail artisan make:model Order -m</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 执行数据库迁移</span></span><br><span class=\"line\">sail artisan migrate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 开启队列监听</span></span><br><span class=\"line\">sail artisan queue:work</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-依赖管理-（Composer）\"><a href=\"#1-2-依赖管理-（Composer）\" class=\"headerlink\" title=\"1.2 依赖管理 （Composer）\"></a>1.2 依赖管理 （Composer）</h3><p>使用 Sail 管理依赖可解决 PHP 版本不匹配问题（例如宿主机 PHP 8.0 而项目需 PHP 8.2）。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装生产依赖</span></span><br><span class=\"line\">sail composer require guzzlehttp/guzzle</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装开发依赖</span></span><br><span class=\"line\">sail composer require laravel/pint --dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 执行自动加载优化</span></span><br><span class=\"line\">sail composer dump-autoload -o</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"2-前端工作流：Node-Vite\"><a href=\"#2-前端工作流：Node-Vite\" class=\"headerlink\" title=\"2. 前端工作流：Node &amp; Vite\"></a>2. 前端工作流：Node &amp; Vite</h2><p>Sail 默认集成了 Node.js 运行时，支持现代化的前端构建流程。这意味着宿主机也<strong>无需安装 Node&#x2F;NPM</strong>。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装前端依赖</span></span><br><span class=\"line\">sail npm install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 启动开发服务器 （HMR hot-reload enabled）</span></span><br><span class=\"line\">sail npm run dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 构建生产资源</span></span><br><span class=\"line\">sail npm run build</span><br></pre></td></tr></table></figure>\n\n<p>Sail 会自动处理 Docker 端口映射（默认 5173），确保 WSL2 中的 Vite Server 可被宿主机浏览器访问。</p>\n<hr>\n<h2 id=\"3-服务生命周期管理\"><a href=\"#3-服务生命周期管理\" class=\"headerlink\" title=\"3. 服务生命周期管理\"></a>3. 服务生命周期管理</h2><p>基于 Docker Compose 的服务治理。</p>\n<ul>\n<li><strong>启动服务栈</strong> （Detached Mode）:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail up -d</span><br></pre></td></tr></table></figure></li>\n<li><strong>停止服务栈</strong>:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail stop</span><br></pre></td></tr></table></figure></li>\n<li><strong>查看容器状态</strong>:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail ps</span><br></pre></td></tr></table></figure>\n<em>Output 示例</em>:<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NAME                    COMMAND                  STATUS              PORTS</span><br><span class=\"line\">example-app-laravel.test-1   &quot;start-container&quot;        Up                  0.0.0.0:80-&gt;80/tcp</span><br><span class=\"line\">example-app-mysql-1          &quot;docker-entrypoint...&quot;   Up                  0.0.0.0:3306-&gt;3306/tcp</span><br></pre></td></tr></table></figure></li>\n</ul>\n<hr>\n<h2 id=\"4-容器访问与调试\"><a href=\"#4-容器访问与调试\" class=\"headerlink\" title=\"4. 容器访问与调试\"></a>4. 容器访问与调试</h2><h3 id=\"4-1-Shell-Access\"><a href=\"#4-1-Shell-Access\" class=\"headerlink\" title=\"4.1 Shell Access\"></a>4.1 Shell Access</h3><p>在特定场景下（如检查日志、手动调试脚本），需直接进入容器 Shell：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 以 workspace 用户 （sail） 进入应用容器</span></span><br><span class=\"line\">sail shell</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 以 root 用户进入 （主要用于安装系统级依赖）</span></span><br><span class=\"line\">sail root-shell</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-2-临时站点共享-（Expose）\"><a href=\"#4-2-临时站点共享-（Expose）\" class=\"headerlink\" title=\"4.2 临时站点共享 （Expose）\"></a>4.2 临时站点共享 （Expose）</h3><p>基于 <code>ngrok</code> 或 <code>expose</code> 的隧道服务，将本地开发环境暴露至公网，便于 Webhook 调试或远程演示。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail share</span><br></pre></td></tr></table></figure>\n<p>执行后将获得一个 <code>http://&lt;random&gt;.sharedwithexpose.com</code> 的公网链接。</p>\n<hr>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>Sail 构建了一套完整的 <strong>容器化工具链 （Containerized Toolchain）</strong>。通过简单的 CLI 封装，它屏蔽了 Docker 底层的复杂性，同时保留了容器化开发的所有优势：隔离、一致、可移植。</p>\n<p>在下一章《疑难杂症篇》中，我们将深入解决 Docker 环境下常见的运行时问题（网络、IO、权限）。</p>\n",
            "tags": [
                "Laravel",
                "Sail",
                "Artisan",
                "Composer"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/24/84.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88Git%20%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%9A%E6%9C%BA%E5%BC%80%E5%8F%91%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/24/84.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88Git%20%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%9A%E6%9C%BA%E5%BC%80%E5%8F%91%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（Git 同步与多机开发篇）",
            "date_published": "2026-01-24T02:00:00.000Z",
            "content_html": "<h2 id=\"协同工作流概述\"><a href=\"#协同工作流概述\" class=\"headerlink\" title=\"协同工作流概述\"></a>协同工作流概述</h2><p>在多设备（如公司工作站与家用 PC）间同步 Laravel Sail 项目时，核心挑战在于<strong>依赖的引导与恢复</strong>。<br>由于 <code>sail</code> 命令行脚本位于 <code>/vendor/bin</code> 目录下，而 <code>/vendor</code> 目录通常被 Git 忽略。这导致在新设备拉取代码后，因缺少 <code>vendor</code> 目录而无法直接调用 <code>sail</code> 命令启动环境，进而无法安装依赖——这是一个典型的死锁问题。</p>\n<p>本文将介绍标准化的多机协同方案，通过 Docker 临时容器完成依赖的 <strong>初始化引导 （Bootstrapping）</strong>。</p>\n<hr>\n<h2 id=\"1-源代码提交-（Source-Control）\"><a href=\"#1-源代码提交-（Source-Control）\" class=\"headerlink\" title=\"1. 源代码提交 （Source Control）\"></a>1. 源代码提交 （Source Control）</h2><p>在首台设备（如初始化项目的机器）上，需确保 Git 忽略规则符合标准。Laravel 默认的 <code>.gitignore</code> 已包含 <code>/vendor</code> 与 <code>.env</code>，请遵循此规范，<strong>切勿</strong>将依赖包或敏感配置提交至版本控制系统。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 标准 Git 初始化流程</span></span><br><span class=\"line\">git init</span><br><span class=\"line\">git checkout -b main</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;feat: project init&quot;</span></span><br><span class=\"line\">git remote add origin &lt;repository_url&gt;</span><br><span class=\"line\">git push -u origin main</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"2-新环境拉取与依赖引导\"><a href=\"#2-新环境拉取与依赖引导\" class=\"headerlink\" title=\"2. 新环境拉取与依赖引导\"></a>2. 新环境拉取与依赖引导</h2><p>在第二台设备上，确保已部署好 WSL2 与 Docker Desktop 环境。</p>\n<h3 id=\"2-1-克隆代码\"><a href=\"#2-1-克隆代码\" class=\"headerlink\" title=\"2.1 克隆代码\"></a>2.1 克隆代码</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/code &amp;&amp; <span class=\"built_in\">cd</span> ~/code</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> &lt;repository_url&gt; project-name</span><br><span class=\"line\"><span class=\"built_in\">cd</span> project-name</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-依赖引导-（Dependency-Bootstrapping）\"><a href=\"#2-2-依赖引导-（Dependency-Bootstrapping）\" class=\"headerlink\" title=\"2.2 依赖引导 （Dependency Bootstrapping）\"></a>2.2 依赖引导 （Dependency Bootstrapping）</h3><p>此时无法直接运行 <code>sail up</code>。我们需要通过 Docker 运行一个一次性的 PHP 容器来执行 <code>composer install</code>。</p>\n<p>执行以下指令（Laravel 官方推荐方案）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --<span class=\"built_in\">rm</span> \\</span><br><span class=\"line\">    -u <span class=\"string\">&quot;<span class=\"subst\">$(id -u)</span>:<span class=\"subst\">$(id -g)</span>&quot;</span> \\</span><br><span class=\"line\">    -v <span class=\"string\">&quot;<span class=\"subst\">$(pwd)</span>:/var/www/html&quot;</span> \\</span><br><span class=\"line\">    -w /var/www/html \\</span><br><span class=\"line\">    laravelsail/php82-composer:latest \\</span><br><span class=\"line\">    composer install --ignore-platform-reqs</span><br></pre></td></tr></table></figure>\n\n<p><strong>指令解析</strong>：</p>\n<ul>\n<li><code>--rm</code>: 容器执行完毕后自动删除，不残留垃圾。</li>\n<li><code>-u &quot;$(id -u):$(id -g)&quot;</code>: 使用当前宿主机用户 ID 运行容器内进程，<strong>确保生成的 vendor 文件权限正确</strong>（避免 root 权限问题）。</li>\n<li><code>-v &quot;$(pwd):/var/www/html&quot;</code>: 将当前项目目录挂载至容器。</li>\n<li><code>laravelsail/php82-composer</code>: 使用包含 PHP 8.2 和 Composer 的专用镜像。</li>\n</ul>\n<p>执行完毕后，宿主机目录下将生成标准的 <code>vendor</code> 目录，此时 <code>sail</code> 脚本已就位。</p>\n<hr>\n<h2 id=\"3-环境配置与启动\"><a href=\"#3-环境配置与启动\" class=\"headerlink\" title=\"3. 环境配置与启动\"></a>3. 环境配置与启动</h2><h3 id=\"3-1-配置文件初始化\"><a href=\"#3-1-配置文件初始化\" class=\"headerlink\" title=\"3.1 配置文件初始化\"></a>3.1 配置文件初始化</h3><p>复制环境变量模版文件。注意：生产环境密钥或特定基础设施配置（如 AWS Keys）需单独配置，不应包含在仓库中。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cp</span> .env.example .<span class=\"built_in\">env</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-启动容器栈\"><a href=\"#3-2-启动容器栈\" class=\"headerlink\" title=\"3.2 启动容器栈\"></a>3.2 启动容器栈</h3><p>拥有 <code>vendor</code> 目录后，即可正常调用 Sail：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启动环境</span></span><br><span class=\"line\">sail up -d</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 生成应用密钥</span></span><br><span class=\"line\">sail artisan key:generate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 执行数据库迁移</span></span><br><span class=\"line\">sail artisan migrate</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"4-验证与总结\"><a href=\"#4-验证与总结\" class=\"headerlink\" title=\"4. 验证与总结\"></a>4. 验证与总结</h2><p>访问 <code>http://localhost</code> 确认服务运行正常。</p>\n<p>至此，我们建立了一套基于 <strong>Git + Docker Bootstrapping</strong> 的标准化工作流：</p>\n<ol>\n<li><strong>提交</strong>：仅提交业务代码与声明文件 (<code>composer.json</code>, <code>docker-compose.yml</code>).</li>\n<li><strong>拉取</strong>：在任意新设备获取代码。</li>\n<li><strong>引导</strong>：使用 <code>docker run</code> 引导安装依赖。</li>\n<li><strong>启动</strong>：使用 <code>sail up</code> 一键拉起完整环境。</li>\n</ol>\n<p>这种工作流确保了，无论在哪台设备，只要有 Docker，就能 100% 复刻出完全一致的开发环境。</p>\n",
            "tags": [
                "Git",
                "GitHub",
                "Laravel",
                "Sail"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/23/83.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/23/83.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（环境配置篇）",
            "date_published": "2026-01-23T10:00:00.000Z",
            "content_html": "<h2 id=\"部署目标\"><a href=\"#部署目标\" class=\"headerlink\" title=\"部署目标\"></a>部署目标</h2><p>本文将从零开始构建基于 <strong>WSL2 （Windows Subsystem for Linux 2）</strong> 的标准化 Docker 开发环境，并完成首个 Laravel Sail 项目的初始化。</p>\n<p><strong>环境要求</strong>：</p>\n<ul>\n<li><strong>OS</strong>: Windows 11 （Build 22000+） 或 Windows 10 （Build 19041+）.</li>\n<li><strong>BIOS</strong>: 开启 CPU 虚拟化 （Virtualization Technology）.</li>\n</ul>\n<hr>\n<h2 id=\"1-基础设施准备\"><a href=\"#1-基础设施准备\" class=\"headerlink\" title=\"1. 基础设施准备\"></a>1. 基础设施准备</h2><h3 id=\"1-1-验证虚拟化支持\"><a href=\"#1-1-验证虚拟化支持\" class=\"headerlink\" title=\"1.1 验证虚拟化支持\"></a>1.1 验证虚拟化支持</h3><p>Docker Desktop 依赖 Hypervisor 层支持。请确保 BIOS&#x2F;UEFI 中已开启虚拟化（Intel VT-x 或 AMD-V）。</p>\n<ul>\n<li><em>验证方式</em>：任务管理器 -&gt; 性能 -&gt; CPU -&gt; <strong>虚拟化：已启用</strong>。</li>\n</ul>\n<h3 id=\"1-2-部署-WSL2\"><a href=\"#1-2-部署-WSL2\" class=\"headerlink\" title=\"1.2 部署 WSL2\"></a>1.2 部署 WSL2</h3><p>使用管理员权限打开 PowerShell 或 Windows Terminal，执行以下指令完成 WSL2 及 Ubuntu 发行版的自动安装：</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wsl <span class=\"literal\">--install</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>Note</strong>: 安装完成后需<strong>重启系统</strong>。重启后会自动弹出终端窗口，按提示设置 UNIX 用户名与密码即可。</p>\n</blockquote>\n<h3 id=\"1-3-安装-Docker-Desktop\"><a href=\"#1-3-安装-Docker-Desktop\" class=\"headerlink\" title=\"1.3 安装 Docker Desktop\"></a>1.3 安装 Docker Desktop</h3><p>下载并安装 <a href=\"https://www.docker.com/products/docker-desktop/\">Docker Desktop for Windows</a>。</p>\n<p><strong>关键配置检查</strong>：<br>安装向导中务必勾选 <strong>Use WSL 2 instead of Hyper-V</strong>（通常为默认选中）。<br>启动后，进入 Settings -&gt; Resources -&gt; WSL Integration：</p>\n<ol>\n<li>确保 <strong>Enable integration with my default WSL distro</strong> 为开启状态。</li>\n<li>在下方 distro 列表中，确保 <strong>Ubuntu</strong> 处于开启状态。</li>\n</ol>\n<hr>\n<h2 id=\"2-初始化-Laravel-Sail-项目\"><a href=\"#2-初始化-Laravel-Sail-项目\" class=\"headerlink\" title=\"2. 初始化 Laravel Sail 项目\"></a>2. 初始化 Laravel Sail 项目</h2><p>所有后续操作建议直接在 WSL2 终端（Ubuntu）中执行，以获得原生的 Linux 开发体验。</p>\n<h3 id=\"2-1-创建工作区\"><a href=\"#2-1-创建工作区\" class=\"headerlink\" title=\"2.1 创建工作区\"></a>2.1 创建工作区</h3><p>建议在 WSL 用户主目录下统一管理项目，避免 Windows 文件系统 （NTFS） 挂载带来的 I&#x2F;O 性能损耗。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/code &amp;&amp; <span class=\"built_in\">cd</span> ~/code</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-构建项目\"><a href=\"#2-2-构建项目\" class=\"headerlink\" title=\"2.2 构建项目\"></a>2.2 构建项目</h3><p>使用 Laravel 官方构建脚本初始化项目（通过临时 Docker 容器）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 请将 &#x27;example-app&#x27; 替换为实际项目名</span></span><br><span class=\"line\">curl -s https://laravel.build/example-app | bash</span><br></pre></td></tr></table></figure>\n\n<p>该指令会自动拉取 <code>php-cli</code> 镜像及相关依赖。</p>\n<h3 id=\"2-3-配置-Shell-Alias-（推荐）\"><a href=\"#2-3-配置-Shell-Alias-（推荐）\" class=\"headerlink\" title=\"2.3 配置 Shell Alias （推荐）\"></a>2.3 配置 Shell Alias （推荐）</h3><p>为简化操作，建议将 <code>sail</code> 执行脚本映射为 Shell 别名。编辑 <code>~/.bashrc</code> 或 <code>~/.zshrc</code>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 添加至配置文件末尾</span></span><br><span class=\"line\"><span class=\"built_in\">alias</span> sail=<span class=\"string\">&#x27;[ -f sail ] &amp;&amp; bash sail || bash vendor/bin/sail&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>加载生效：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"3-启动与验证\"><a href=\"#3-启动与验证\" class=\"headerlink\" title=\"3. 启动与验证\"></a>3. 启动与验证</h2><h3 id=\"3-1-启动环境\"><a href=\"#3-1-启动环境\" class=\"headerlink\" title=\"3.1 启动环境\"></a>3.1 启动环境</h3><p>进入项目目录并后台启动 Sail 服务栈：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/code/example-app</span><br><span class=\"line\">sail up -d</span><br></pre></td></tr></table></figure>\n\n<p>Sail 将根据 <code>docker-compose.yml</code>编排启动 PHP、MySQL、Redis 等容器。首次启动涉及镜像拉取，耗时取决于网络环境。</p>\n<h3 id=\"3-2-服务验证\"><a href=\"#3-2-服务验证\" class=\"headerlink\" title=\"3.2 服务验证\"></a>3.2 服务验证</h3><p>服务启动后，通过宿主机浏览器访问 <code>http://localhost</code>。<br>若显示 Laravel 欢迎页，即表示：</p>\n<ul>\n<li>✅ Docker 容器运行正常</li>\n<li>✅ 端口转发 （Port Forwarding） 正常</li>\n<li>✅ PHP 运行时挂载正常</li>\n</ul>\n<hr>\n<h2 id=\"下一步\"><a href=\"#下一步\" class=\"headerlink\" title=\"下一步\"></a>下一步</h2><p>基础环境已就绪。下一章节我们将讨论<strong>多端协作场景</strong>：如何基于 Git 管理代码，并在不同设备间实现无缝的依赖引导与环境同步。</p>\n",
            "tags": [
                "Laravel",
                "Docker",
                "Sail",
                "WSL2"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2026/01/22/82.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E4%BB%8B%E7%BB%8D%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/22/82.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E4%BB%8B%E7%BB%8D%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（介绍篇）",
            "date_published": "2026-01-22T06:00:00.000Z",
            "content_html": "<blockquote>\n<p><strong>⚠️ 前置要求</strong></p>\n<p><strong>本系列涉及的技术栈（Docker, WSL2, Composer）依赖稳定的国际互联网连接。</strong><br>如果无法解决网络访问问题（如 Docker Hub 镜像拉取），这套方案将难以实施。建议优先解决网络层设施，或退而求其次选择传统集成环境。<br>（网络解决方案详见系列第五篇《疑难杂症篇》）</p>\n</blockquote>\n<h2 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h2><p>在 Windows 平台搭建标准的 PHP 开发环境，历来有多种技术选型。从早期的集成包（XAMPP&#x2F;WAMP），到国产面板（PhpStudy&#x2F;宝塔），再到完全虚拟化（Vagrant&#x2F;Homestead）。每种方案在解决特定问题的同时，也引入了新的维护成本：</p>\n<ul>\n<li><strong>集成环境</strong>：安装便捷，但环境版本耦合严重，配置（如 php.ini）管理混乱，且会对宿主机注册大量系统服务，造成“环境污染”。</li>\n<li><strong>虚拟机</strong>：实现了隔离，但系统资源开销大，启动缓慢，且文件系统同步（I&#x2F;O）性能始终是瓶颈。</li>\n<li><strong>本机原生安装</strong>：依赖手动管理 PHP 系统路径和扩展，多版本共存（e.g., Maintain PHP 7.4 Legacy &amp; PHP 8.2 New Project）维护极其繁琐。</li>\n</ul>\n<p>本系列文章旨在为 Windows （WSL2） 用户提供一套基于 <strong>Laravel Sail</strong> 的现代化开发环境最佳实践，涵盖从环境初始化到团队协作的全流程。</p>\n<h3 id=\"系列大纲\"><a href=\"#系列大纲\" class=\"headerlink\" title=\"系列大纲\"></a>系列大纲</h3><ol>\n<li><strong>介绍篇（本文）</strong>：架构原理解析与技术选型优势。</li>\n<li><strong>环境配置篇</strong>：WSL2、Docker Desktop 安装及 Sail 项目初始化。</li>\n<li><strong>Git 同步与多机开发篇</strong>：基于 Docker 临时容器的依赖引导与多端同步。</li>\n<li><strong>日常使用篇</strong>：Sail CLI 命令映射、服务管理与 Shell 常用技巧。</li>\n<li><strong>疑难杂症篇</strong>：常见网络、端口、权限及性能问题排查。</li>\n<li><strong>番外篇</strong>：开发设备选型与全栈工具链参考。</li>\n</ol>\n<hr>\n<h2 id=\"什么是-Laravel-Sail？\"><a href=\"#什么是-Laravel-Sail？\" class=\"headerlink\" title=\"什么是 Laravel Sail？\"></a>什么是 Laravel Sail？</h2><p>在进入实操前，需明确其核心组件与设计理念。</p>\n<h3 id=\"1-框架层：Laravel\"><a href=\"#1-框架层：Laravel\" class=\"headerlink\" title=\"1. 框架层：Laravel\"></a>1. 框架层：Laravel</h3><p>作为 PHP 生态中最主流的 Web 框架，Laravel 强调 <strong>Convention over Configuration （约定优于配置）</strong>。这一理念使得代码结构具有高度的可预测性，不仅利于团队协作，也使得当前的 AI 辅助编程工具（如 Copilot, Gemini）能更准确地理解上下文并生成高质量代码。</p>\n<h3 id=\"2-容器层：Docker\"><a href=\"#2-容器层：Docker\" class=\"headerlink\" title=\"2. 容器层：Docker\"></a>2. 容器层：Docker</h3><p>Docker 提供了独立于宿主机的运行环境。在 Docker 架构中，应用及其依赖（Runtime, Database, Cache）被封装为标准化的<strong>容器（Container）</strong>。这实现了“用完即焚”的轻量化管理，从根本上解决了环境残留问题。</p>\n<h3 id=\"3-本地编排：Laravel-Sail\"><a href=\"#3-本地编排：Laravel-Sail\" class=\"headerlink\" title=\"3. 本地编排：Laravel Sail\"></a>3. 本地编排：Laravel Sail</h3><p>虽然 Docker 强大，但编写和维护 <code>Dockerfile</code> 与 <code>docker-compose.yml</code> 具有一定的学习曲线。<br><strong>Laravel Sail 是 Laravel 官方提供的轻量级 CLI 接口</strong>，用于与 Docker 开发环境进行交互。</p>\n<p>它本质上是对 docker-compose 的封装。开发者无需手动执行复杂的 Docker 指令，只需通过简单的 <code>sail</code> 命令即可管理包含 PHP, MySQL, Redis 等服务的完整技术栈。</p>\n<hr>\n<h2 id=\"为什么选择-Sail？\"><a href=\"#为什么选择-Sail？\" class=\"headerlink\" title=\"为什么选择 Sail？\"></a>为什么选择 Sail？</h2><p>在众多方案中推荐 Sail，主要基于以下技术考量：</p>\n<h3 id=\"1-彻底的环境隔离（Isolation）\"><a href=\"#1-彻底的环境隔离（Isolation）\" class=\"headerlink\" title=\"1. 彻底的环境隔离（Isolation）\"></a>1. 彻底的环境隔离（Isolation）</h3><p>这是现代化开发环境的核心诉求。<br>在 Sail 架构下，<strong>宿主机（Host OS）无需安装 PHP、Composer、Node.js 或 MySQL</strong>。所有运行时均托管于 Docker 容器内。</p>\n<ul>\n<li><strong>多版本并行</strong>：可同时运行基于不同 PHP 版本的项目，容器间网络与文件系统互不干扰。</li>\n<li><strong>零污染</strong>：开发服务不占用本地系统服务资源，容器停止后，宿主机保持纯净。</li>\n<li><strong>高容错</strong>：环境配置失误仅影响容器本身，通过重建容器即可快速恢复。</li>\n</ul>\n<h3 id=\"2-Infrastructure-as-Code（IaC）-与环境一致性\"><a href=\"#2-Infrastructure-as-Code（IaC）-与环境一致性\" class=\"headerlink\" title=\"2. Infrastructure as Code（IaC） 与环境一致性\"></a>2. Infrastructure as Code（IaC） 与环境一致性</h3><p>“Look, it works on my machine” 是团队协作中的典型低效场景，通常源于本地扩展、库版本或配置文件的细微差异。<br>Sail 项目根目录下的 <code>docker-compose.yml</code> 显式定义了环境拓扑。<strong>代码库即环境</strong>。新成员拉取代码后，只需执行启动命令，即可获得与 CI&#x2F;CD 管道及生产环境高度一致的运行环境，显著降低了 Onboarding 成本。</p>\n<h3 id=\"3-官方原生支持\"><a href=\"#3-官方原生支持\" class=\"headerlink\" title=\"3. 官方原生支持\"></a>3. 官方原生支持</h3><p>作为框架的一等公民（First-party Integration）：</p>\n<ul>\n<li>预置了适配 Laravel 的 <code>php.ini</code> 配置。</li>\n<li>集成了 Node&#x2F;NPM 及 Vite 热更新支持。</li>\n<li>内置了常用 PHP 扩展（BCMath, Intl, GD 等）及辅助服务（Mailpit, Selenium）。</li>\n</ul>\n<p>官方维护保证了环境镜像的安全性与更新及时性。</p>\n<h3 id=\"4-针对性优化\"><a href=\"#4-针对性优化\" class=\"headerlink\" title=\"4. 针对性优化\"></a>4. 针对性优化</h3><p>尽管 Docker on Windows 体验已大幅提升，但在文件系统（NTFS vs ext4）和网络层面仍存在特定坑点。本系列将针对国内网络环境及 WSL2 的 I&#x2F;O 性能特性，提供经过验证的最佳实践配置。</p>\n<hr>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>对于追求工程标准化的 Laravel 开发者，<strong>Laravel Sail + WSL2 + Docker</strong> 是目前 Windows 平台上最符合业界标准的开发环境方案。</p>\n<p>下一章我们将进入实施阶段，完成基础环境的搭建。</p>\n",
            "tags": [
                "Laravel",
                "Sail"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2025/10/13/80.%20Laravel%20%E9%A1%B9%E7%9B%AE%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%90%8E%EF%BC%8C%E8%B5%84%E6%BA%90%E9%93%BE%E6%8E%A5%E5%A4%9A%E5%87%BA%E4%B8%AA%2080%20%E7%AB%AF%E5%8F%A3%E5%AD%97%E6%A0%B7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/",
            "url": "https://nightingalewk.cn/2025/10/13/80.%20Laravel%20%E9%A1%B9%E7%9B%AE%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%90%8E%EF%BC%8C%E8%B5%84%E6%BA%90%E9%93%BE%E6%8E%A5%E5%A4%9A%E5%87%BA%E4%B8%AA%2080%20%E7%AB%AF%E5%8F%A3%E5%AD%97%E6%A0%B7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/",
            "title": "Laravel 项目容器化部署生产环境后，资源链接多出个 80 端口字样解决方案",
            "date_published": "2025-10-13T02:00:00.000Z",
            "content_html": "<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近在阿里云服务器上部署一个基于 Laravel 12 + Filament v4 的项目（代号“土豆食堂”），使用 Docker Compose 容器化部署，后端 Nginx + PHP-FPM，前端通过 Nginx Proxy Manager (NPM) 实现 HTTPS 反向代理。部署完成后，一切看似正常，但访问应用时发现前端资源（如 Filament 的 <code>app.js</code>）的 URL 被错误生成成 <code>https://lynx.wkarrow.top:80/js/filament/filament/app.js?v=4.1.6.0</code>，多出的 <code>:80</code> 端口导致浏览器无法加载资源，报 404 错误。</p>\n<p>这不是代码 bug，而是典型的 HTTPS 代理到 HTTP 后端的头部传递问题。NPM 默认将 <code>X-Forwarded-Port</code> 设置为后端端口 80，而 Laravel 在生成资产 URL 时会根据此头部附加端口，导致与 HTTPS scheme 不匹配。</p>\n<p>本文记录了问题排查与最终解决方案，重点分享后端 Nginx 的备选修复方法（适用于 NPM 配置无效的情况）。希望对类似部署遇到坑的开发者有帮助！</p>\n<h2 id=\"问题复现与分析\"><a href=\"#问题复现与分析\" class=\"headerlink\" title=\"问题复现与分析\"></a>问题复现与分析</h2><h3 id=\"环境概述\"><a href=\"#环境概述\" class=\"headerlink\" title=\"环境概述\"></a>环境概述</h3><ul>\n<li><strong>项目</strong>：Laravel 12 + Filament v4，使用 Vite 构建前端资源。</li>\n<li><strong>部署</strong>：Docker Compose（<code>docker-compose.internet.yml</code>），包含 app (PHP-FPM)、nginx、mysql、redis 等服务。</li>\n<li><strong>代理</strong>：NPM 监听 443 端口，强制 HTTPS，转发到后端 Nginx 的 80 端口。</li>\n<li><strong>Nginx 配置</strong>：<code>default.conf</code> 中已传递 <code>X-Forwarded-*</code> 头部到 PHP-FPM。</li>\n</ul>\n<h3 id=\"故障现象\"><a href=\"#故障现象\" class=\"headerlink\" title=\"故障现象\"></a>故障现象</h3><ul>\n<li>正常预期：<code>https://lynx.wkarrow.top/js/filament/filament/app.js?v=4.1.6.0</code></li>\n<li>实际生成：<code>https://lynx.wkarrow.top:80/js/filament/filament/app.js?v=4.1.6.0</code></li>\n<li>影响：浏览器 Network 面板显示资源 404，应用界面 JS&#x2F;CSS 加载失败，Filament 面板无法交互。</li>\n</ul>\n<h3 id=\"根因分析\"><a href=\"#根因分析\" class=\"headerlink\" title=\"根因分析\"></a>根因分析</h3><ol>\n<li>NPM 作为前端代理，添加 <code>X-Forwarded-Proto: https</code> 和 <code>X-Forwarded-Port: 80</code>（后端端口）。</li>\n<li>后端 Nginx 将这些头部传递给 PHP-FPM（<code>fastcgi_param HTTP_X_FORWARDED_PORT $http_x_forwarded_port;</code>）。</li>\n<li>Laravel 的 <code>Request</code> 对象信任代理头部（<code>config/trustedproxies.php</code>），读取 <code>X-Forwarded-Port=80</code>。</li>\n<li>URL 生成器（如 <code>asset()</code> 或 Filament 的资源 URL）检测到端口非 HTTPS 默认 443，故附加 <code>:80</code>。</li>\n<li>参考 Laravel 12 文档（HTTP Requests 部分）：<code>request()-&gt;getPort()</code> 优先从 <code>X-Forwarded-Port</code> 取值，导致畸形 URL。</li>\n</ol>\n<p>这是一个常见痛点，尤其在 Docker + 反向代理环境中。</p>\n<h2 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h2><p>我先尝试了在 NPM 的 Advanced 选项卡添加 <code>proxy_set_header X-Forwarded-Port 443;</code>，但由于 NPM 的自定义配置有时不稳定（可能与版本或缓存相关），最终选择了后端 Nginx 的备选修复——直接在 <code>default.conf</code> 中覆盖端口逻辑。这方法更可靠，且不依赖代理工具。</p>\n<h3 id=\"步骤：修改后端-Nginx-配置\"><a href=\"#步骤：修改后端-Nginx-配置\" class=\"headerlink\" title=\"步骤：修改后端 Nginx 配置\"></a>步骤：修改后端 Nginx 配置</h3><ol>\n<li><p><strong>编辑配置文件</strong>：在项目目录下，打开 <code>./docker-internet/nginx/default.conf</code>（或挂载路径 <code>/etc/nginx/conf.d/default.conf</code>）。</p>\n</li>\n<li><p><strong>定位 PHP 处理块</strong>：找到 <code>location ~ \\.php$</code> 部分（已存在 FastCGI 配置）。</p>\n</li>\n<li><p><strong>添加覆盖逻辑</strong>：在 <code>fastcgi_param</code> 相关行后，插入以下 Nginx 指令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~ \\.php$ &#123;</span><br><span class=\"line\">    try_files $uri =404;</span><br><span class=\"line\">    fastcgi_split_path_info ^(.+\\.php)(/.+)$;</span><br><span class=\"line\">    fastcgi_pass app:9000;</span><br><span class=\"line\">    fastcgi_index index.php;</span><br><span class=\"line\">    include fastcgi_params;</span><br><span class=\"line\">    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class=\"line\">    fastcgi_param PATH_INFO $fastcgi_path_info;</span><br><span class=\"line\"></span><br><span class=\"line\">    # 原有头部传递</span><br><span class=\"line\">    fastcgi_param HTTP_X_FORWARDED_FOR $http_x_forwarded_for;</span><br><span class=\"line\">    fastcgi_param HTTP_X_FORWARDED_PROTO $http_x_forwarded_proto;</span><br><span class=\"line\">    fastcgi_param HTTP_X_FORWARDED_HOST $http_x_forwarded_host;</span><br><span class=\"line\">    fastcgi_param HTTP_X_FORWARDED_PORT $http_x_forwarded_port;</span><br><span class=\"line\"></span><br><span class=\"line\">    # 新增：基于 proto 覆盖端口，确保 HTTPS 时为 443</span><br><span class=\"line\">    set $real_port $http_x_forwarded_port;</span><br><span class=\"line\">    if ($http_x_forwarded_proto = &quot;https&quot;) &#123;</span><br><span class=\"line\">        set $real_port &quot;443&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    fastcgi_param HTTP_X_FORWARDED_PORT $real_port;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>解释</strong>：<ul>\n<li><code>set $real_port $http_x_forwarded_port;</code>：默认使用传入端口。</li>\n<li><code>if ($http_x_forwarded_proto = &quot;https&quot;) &#123; set $real_port &quot;443&quot;; &#125;</code>：如果 scheme 是 HTTPS，则强制覆盖为 443（忽略后端 80）。</li>\n<li>最后用 <code>$real_port</code> 替换原参数，确保 Laravel 读取正确端口。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>保存并重启服务</strong>：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker compose -f docker-compose.internet.yml restart nginx</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Nginx 会优雅重载，无需重建整个容器。</li>\n</ul>\n</li>\n<li><p><strong>辅助优化</strong>（可选，但推荐）：</p>\n<ul>\n<li>确认 <code>.env</code> 中的 <code>APP_URL=https://lynx.wkarrow.top</code>（无端口）。</li>\n<li>清除 Laravel 缓存：<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker compose -f docker-compose.internet.yml exec app php artisan config:clear</span><br><span class=\"line\">sudo docker compose -f docker-compose.internet.yml exec app php artisan cache:clear</span><br><span class=\"line\">sudo docker compose -f docker-compose.internet.yml exec app php artisan optimize</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"验证与测试\"><a href=\"#验证与测试\" class=\"headerlink\" title=\"验证与测试\"></a>验证与测试</h2><ul>\n<li><strong>浏览器测试</strong>：清空缓存，访问 <code>https://lynx.wkarrow.top</code>，打开 F12 &gt; Network，检查资源 URL（如 <code>app.js</code>）是否无 <code>:80</code>，并确认 200 OK。</li>\n<li><strong>命令行验证</strong>：<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -I https://lynx.wkarrow.top/js/filament/filament/app.js</span><br></pre></td></tr></table></figure>\n预期返回 200，无重定向或 404。</li>\n<li><strong>日志检查</strong>：若仍有问题，查看容器日志：<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker compose -f docker-compose.internet.yml logs nginx app | grep -i &quot;forwarded\\|port&quot;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>修复后，Filament 面板加载顺畅，前端交互完美！</p>\n<h2 id=\"总结与建议\"><a href=\"#总结与建议\" class=\"headerlink\" title=\"总结与建议\"></a>总结与建议</h2><p>这个坑让我意识到，在容器化部署中，代理头部的处理至关重要。优先尝试 NPM 的 Advanced 配置，如果无效，后端 Nginx 的 <code>if</code> 逻辑是稳妥备选。未来更新项目时，记得 git pull 后检查此配置是否覆盖。</p>\n<p>如果您也遇到类似问题，欢迎评论区交流！项目源码在 <a href=\"https://github.com/NightingaleWK/lynx\">GitHub</a> 开源中，星标支持下～</p>\n<p><strong>参考</strong>：</p>\n<ul>\n<li>Laravel 12 文档：HTTP Requests</li>\n<li>Nginx Proxy Manager 官方指南：Advanced Tab</li>\n</ul>\n<hr>\n<p><em>本文基于实际部署经验撰写，如有疑问，欢迎讨论。</em></p>\n",
            "tags": [
                "Laravel",
                "Docker",
                "Nginx",
                "反向代理",
                "NPM",
                "HTTPS",
                "问题排查"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2025/10/09/78.%20Laravel%20%E9%A1%B9%E7%9B%AE%20Docker%20%E5%8C%96%E9%83%A8%E7%BD%B2%E4%B8%8E%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/",
            "url": "https://nightingalewk.cn/2025/10/09/78.%20Laravel%20%E9%A1%B9%E7%9B%AE%20Docker%20%E5%8C%96%E9%83%A8%E7%BD%B2%E4%B8%8E%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/",
            "title": "Laravel 项目 Docker 化部署与运维手册",
            "date_published": "2025-10-09T08:00:00.000Z",
            "content_html": "<p>本文档详细记录了如何将 “土豆食堂” (Lynx) 这个 Laravel 12 项目通过 Docker 进行容器化打包、部署、运行及日常维护。</p>\n<p>个人项目，已开源：<a href=\"https://github.com/NightingaleWK/lynx\">https://github.com/NightingaleWK/lynx</a></p>\n<h2 id=\"一、环境准备\"><a href=\"#一、环境准备\" class=\"headerlink\" title=\"一、环境准备\"></a><strong>一、环境准备</strong></h2><p>在开始之前，请确保您的部署目标机器（例如 Windows 11）已安装并运行 Docker Desktop。</p>\n<h2 id=\"二、项目改造（首次部署需执行）\"><a href=\"#二、项目改造（首次部署需执行）\" class=\"headerlink\" title=\"二、项目改造（首次部署需执行）\"></a><strong>二、项目改造（首次部署需执行）</strong></h2><p>以下文件需要在您本地的项目代码中创建。</p>\n<h3 id=\"1-目录结构\"><a href=\"#1-目录结构\" class=\"headerlink\" title=\"1. 目录结构\"></a><strong>1. 目录结构</strong></h3><p>为了清晰地区分生产环境与 Sail 开发环境的配置，我们将所有生产部署相关的文件都存放在一个新的 docker-prod 目录中。</p>\n<p>在项目根目录下，创建如下的目录和文件结构：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">your-laravel-project/</span><br><span class=\"line\">├── docker-prod/ # &lt;-- 新建，存放所有生产环境配置</span><br><span class=\"line\">│ ├── app/</span><br><span class=\"line\">│ │ └── Dockerfile</span><br><span class=\"line\">│ └── nginx/</span><br><span class=\"line\">│ └── default.conf</span><br><span class=\"line\">├── docker/# &lt;-- 这是 Sail 的开发环境目录 (保留不变)</span><br><span class=\"line\">├── docker-compose.prod.yml# &lt;-- 新建 (注意文件名)</span><br><span class=\"line\">└── .dockerignore# &lt;-- 新建</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-创建核心配置文件\"><a href=\"#2-创建核心配置文件\" class=\"headerlink\" title=\"2. 创建核心配置文件\"></a><strong>2. 创建核心配置文件</strong></h3><p>请根据后续提供的文件内容，在您的项目中创建或替换以下文件。</p>\n<ul>\n<li>docker-compose.prod.yml (服务编排文件)</li>\n<li>docker-prod&#x2F;app&#x2F;Dockerfile (PHP 应用镜像构建文件)</li>\n<li>docker-prod&#x2F;nginx&#x2F;default.conf (Nginx 配置文件)</li>\n<li>.dockerignore (Docker 忽略文件)</li>\n</ul>\n<h3 id=\"3-修改-Laravel-配置-env\"><a href=\"#3-修改-Laravel-配置-env\" class=\"headerlink\" title=\"3. 修改 Laravel 配置 (.env)\"></a><strong>3. 修改 Laravel 配置 (.env)</strong></h3><ol>\n<li>复制 .env.example 为 .env 文件。</li>\n<li><strong>关键修改</strong>：确保数据库和 Redis 的 HOST 指向 Docker Compose 中定义的服务名。</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">APP_ENV=production</span><br><span class=\"line\">APP_DEBUG=false</span><br><span class=\"line\">APP_KEY= # 留空，后续会通过命令生成</span><br><span class=\"line\"></span><br><span class=\"line\">DB_CONNECTION=mysql</span><br><span class=\"line\">DB_HOST=mysql # &lt;-- 必须是 mysql</span><br><span class=\"line\">DB_PORT=3306</span><br><span class=\"line\">DB_DATABASE=lynx# 您的数据库名</span><br><span class=\"line\">DB_USERNAME=sail# 您的用户名</span><br><span class=\"line\">DB_PASSWORD=password# 您的密码</span><br><span class=\"line\"></span><br><span class=\"line\">CACHE_DRIVER=redis</span><br><span class=\"line\">QUEUE_CONNECTION=redis</span><br><span class=\"line\">SESSION_DRIVER=redis</span><br><span class=\"line\"></span><br><span class=\"line\">REDIS_HOST=redis# &lt;-- 必须是 redis</span><br><span class=\"line\">REDIS_PASSWORD=null</span><br><span class=\"line\">REDIS_PORT=6379</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-生成-SSL-证书-局域网-HTTPS\"><a href=\"#4-生成-SSL-证书-局域网-HTTPS\" class=\"headerlink\" title=\"4. 生成 SSL 证书 (局域网 HTTPS)\"></a><strong>4. 生成 SSL 证书 (局域网 HTTPS)</strong></h3><ol>\n<li>在项目根目录下创建目录 docker-prod&#x2F;certs。</li>\n<li>打开终端 (如 Git Bash 或 WSL)，进入项目根目录，执行以下命令：</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl req -x509 -nodes -days 3650 -newkey rsa:2048 -keyout docker-prod/ certs/lynx-key.pem -out docker-prod/certs/lynx.pem</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><strong>重要提示</strong>：在执行过程中，当提示输入 Common Name 时，<strong>请输入您部署机器的局域网 IP 地址</strong>（例如 192.168.1.100）。</li>\n<li>执行后，请检查 docker-prod&#x2F;certs 目录下是否已生成 lynx.pem 和 lynx-key.pem 两个文件。</li>\n</ol>\n<h2 id=\"三、部署与初始化流程\"><a href=\"#三、部署与初始化流程\" class=\"headerlink\" title=\"三、部署与初始化流程\"></a><strong>三、部署与初始化流程</strong></h2><h3 id=\"步骤-1：构建并启动所有容器\"><a href=\"#步骤-1：构建并启动所有容器\" class=\"headerlink\" title=\"步骤 1：构建并启动所有容器\"></a><strong>步骤 1：构建并启动所有容器</strong></h3><p>在项目根目录下，打开终端，执行以下命令。此命令会根据 Dockerfile 构建应用镜像，并以后台模式启动所有服务。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># --no-cache 确保使用最新的基础镜像，避免缓存问题</span></span><br><span class=\"line\"><span class=\"comment\"># --build 强制重新构建镜像</span></span><br><span class=\"line\">docker-compose -f docker-compose.prod.yml up -d --build --no-cache</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"步骤-2：初始化-Laravel-应用\"><a href=\"#步骤-2：初始化-Laravel-应用\" class=\"headerlink\" title=\"步骤 2：初始化 Laravel 应用\"></a><strong>步骤 2：初始化 Laravel 应用</strong></h3><p>容器首次启动后，数据库是空的，应用也没有配置密钥。我们需要进入 app 容器执行一系列初始化命令。</p>\n<ol>\n<li><strong>生成应用密钥 (APP_KEY)</strong>:</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml <span class=\"built_in\">exec</span> app php artisan key:generate</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>运行数据库迁移:<br>此命令会根据 database&#x2F;migrations 目录下的文件，在数据库中创建所有需要的数据表（包括 cache 表等）。\\</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml <span class=\"built_in\">exec</span> app php artisan migrate</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>修正 storage 目录权限:<br>这是解决 “Permission denied” 错误的关键步骤。此命令将容器内的 storage 和 bootstrap&#x2F;cache 目录的所有权交给 php-fpm 的运行用户 www-data。</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml <span class=\"built_in\">exec</span> app <span class=\"built_in\">chown</span> -R www-data:www-data storage bootstrap/cache</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>（可选）填充测试数据:<br>如果您需要在测试时填充数据，可以运行此命令。请注意，生产环境不应执行此操作。</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># --force 参数可以跳过生产环境的确认提示</span></span><br><span class=\"line\">docker-compose -f docker-compose.prod.yml <span class=\"built_in\">exec</span> app php artisan db:seed --force</span><br></pre></td></tr></table></figure>\n\n<p><em>注：若需填充数据，请确保 Dockerfile 中 composer install 命令<strong>没有</strong>使用 –no-dev 参数，以保证 Faker 等开发包被安装。</em></p>\n<h3 id=\"步骤-3：访问您的应用\"><a href=\"#步骤-3：访问您的应用\" class=\"headerlink\" title=\"步骤 3：访问您的应用\"></a><strong>步骤 3：访问您的应用</strong></h3><p>完成以上步骤后，您的应用已经成功部署并运行。</p>\n<ul>\n<li>打开浏览器，访问 https:&#x2F;&#x2F;&lt;您的部署机器 IP&gt;。</li>\n<li>浏览器会提示证书不安全，请选择“高级” -&gt; “继续前往”。</li>\n<li>您应该能看到 Laravel 的欢迎页面或您的应用首页。</li>\n</ul>\n<h2 id=\"四、日常运维命令\"><a href=\"#四、日常运维命令\" class=\"headerlink\" title=\"四、日常运维命令\"></a><strong>四、日常运维命令</strong></h2><h3 id=\"启动-停止服务\"><a href=\"#启动-停止服务\" class=\"headerlink\" title=\"启动&#x2F;停止服务\"></a><strong>启动&#x2F;停止服务</strong></h3><ul>\n<li><strong>启动所有服务</strong> (后台运行):</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml up -d</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>停止并移除所有容器</strong>:</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml down</span><br></pre></td></tr></table></figure>\n\n<p><em>此操作不会删除数据库和 Redis 的持久化数据。</em></p>\n<h3 id=\"查看状态与日志\"><a href=\"#查看状态与日志\" class=\"headerlink\" title=\"查看状态与日志\"></a><strong>查看状态与日志</strong></h3><ul>\n<li><strong>查看所有容器的运行状态</strong>:</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml ps</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>实时查看所有服务的日志</strong>:</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml logs -f</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>只看特定服务的日志</strong> (例如 app 或 queue-worker):</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml logs -f app</span><br><span class=\"line\">docker-compose -f docker-compose.prod.yml logs -f queue-worker</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码更新流程\"><a href=\"#代码更新流程\" class=\"headerlink\" title=\"代码更新流程\"></a><strong>代码更新流程</strong></h3><p>当您通过 git pull 更新了项目代码后：</p>\n<ol>\n<li><strong>重新构建镜像并重启服务</strong>:</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml up -d --build</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><strong>（如果需要）运行新的数据库迁移</strong>:</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml <span class=\"built_in\">exec</span> app php artisan migrate --force</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><strong>（推荐）清理并重建配置缓存</strong>:</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml <span class=\"built_in\">exec</span> app php artisan optimize:clear</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"执行-Artisan-命令\"><a href=\"#执行-Artisan-命令\" class=\"headerlink\" title=\"执行 Artisan 命令\"></a><strong>执行 Artisan 命令</strong></h3><p>您可以在 app 容器内执行任何 Artisan 命令，语法如下：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose -f docker-compose.prod.yml <span class=\"built_in\">exec</span> app php artisan &lt;您的命令&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"五、完整配置文件代码\"><a href=\"#五、完整配置文件代码\" class=\"headerlink\" title=\"五、完整配置文件代码\"></a><strong>五、完整配置文件代码</strong></h2><p>为了方便您快速部署，以下提供了文中提及的所有配置文件的完整代码。</p>\n<h3 id=\"1-docker-prod-app-Dockerfile\"><a href=\"#1-docker-prod-app-Dockerfile\" class=\"headerlink\" title=\"1. docker-prod&#x2F;app&#x2F;Dockerfile\"></a><strong>1. docker-prod&#x2F;app&#x2F;Dockerfile</strong></h3><p>此文件定义了 PHP 应用容器的构建规则，基于 PHP 8.4 FPM Alpine 镜像，并安装了 Laravel 所需的所有扩展。</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 基础镜像升级到 PHP 8.4</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> php:<span class=\"number\">8.4</span>-fpm-alpine</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 设置工作目录</span></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> /var/www/html</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. 优化构建过程：合并依赖安装，并使用 virtual group 以便后续清理</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> apk add --no-cache \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    <span class=\"comment\"># 核心系统工具</span></span></span><br><span class=\"line\">    zip \\</span><br><span class=\"line\">    unzip \\</span><br><span class=\"line\">    <span class=\"comment\"># PHP 扩展依赖</span></span><br><span class=\"line\">    libzip-dev \\</span><br><span class=\"line\">    libpng-dev \\</span><br><span class=\"line\">    jpeg-dev \\</span><br><span class=\"line\">    freetype-dev \\</span><br><span class=\"line\">    icu-dev \\</span><br><span class=\"line\">    <span class=\"comment\"># 创建一个名为 .build-deps 的临时构建依赖组</span></span><br><span class=\"line\">    &amp;&amp; apk <span class=\"keyword\">add</span><span class=\"language-bash\"> --no-cache --virtual .build-deps \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    <span class=\"variable\">$PHPIZE_DEPS</span> \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    zlib-dev \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    linux-headers</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. 借鉴 Sail，补全 Laravel 所需的核心扩展</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> docker-php-ext-configure gd --with-freetype --with-jpeg \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; docker-php-ext-install -j$(<span class=\"built_in\">nproc</span>) \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    pdo_mysql \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    bcmath \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    gd \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    exif \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    intl \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    zip \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    pcntl \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    sockets \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; pecl install redis \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    &amp;&amp; docker-php-ext-enable redis</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4. 清理工作：删除临时的构建依赖，减小镜像体积</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> apk del .build-deps</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装 Composer</span></span><br><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"language-bash\"> --from=composer:latest /usr/bin/composer /usr/bin/composer</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 拷贝 composer 文件并安装依赖</span></span><br><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"language-bash\"> composer.json composer.lock ./</span></span><br><span class=\"line\"><span class=\"comment\"># 生产环境优化：不安装开发依赖，并优化自动加载</span></span><br><span class=\"line\"><span class=\"comment\"># 注意：如果需要在容器内运行 seeder，请暂时移除 --no-dev 参数并重新构建</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> composer install --no-interaction --no-plugins --no-scripts --prefer-dist --no-dev -o</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 拷贝项目代码</span></span><br><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"language-bash\"> . .</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 注意：权限问题将在首次启动后通过 exec 命令解决，以确保与宿主机挂载的目录权限正确</span></span><br><span class=\"line\"><span class=\"comment\"># RUN chown -R www-data:www-data /var/www/html/storage /var/www/html/bootstrap/cache</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 暴露 9000 端口</span></span><br><span class=\"line\"><span class=\"keyword\">EXPOSE</span> <span class=\"number\">9000</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-docker-prod-nginx-default-conf\"><a href=\"#2-docker-prod-nginx-default-conf\" class=\"headerlink\" title=\"2. docker-prod&#x2F;nginx&#x2F;default.conf\"></a><strong>2. docker-prod&#x2F;nginx&#x2F;default.conf</strong></h3><p>此文件定义了 Nginx 的配置规则，实现了 HTTP 到 HTTPS 的自动重定向，并配置了 SSL 证书和 PHP-FPM 的转发规则。</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">listen</span> <span class=\"number\">80</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server_name</span> _; <span class=\"comment\"># 匹配任何主机名</span></span><br><span class=\"line\">    <span class=\"attribute\">return</span> <span class=\"number\">301</span> https://<span class=\"variable\">$host</span><span class=\"variable\">$request_uri</span>; <span class=\"comment\"># 将所有 HTTP 请求重定向到 HTTPS</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">listen</span> <span class=\"number\">443</span> ssl;</span><br><span class=\"line\">    <span class=\"attribute\">server_name</span> _;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># SSL 证书配置</span></span><br><span class=\"line\">    <span class=\"attribute\">ssl_certificate</span> /etc/nginx/certs/lynx.pem;</span><br><span class=\"line\">    <span class=\"attribute\">ssl_certificate_key</span> /etc/nginx/certs/lynx-key.pem;</span><br><span class=\"line\">    <span class=\"attribute\">ssl_protocols</span> TLSv1.<span class=\"number\">2</span> TLSv1.<span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">root</span> /var/www/html/public;</span><br><span class=\"line\">    <span class=\"attribute\">index</span> index.php index.html;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"section\">location</span> / &#123;</span><br><span class=\"line\">        <span class=\"attribute\">try_files</span> <span class=\"variable\">$uri</span> <span class=\"variable\">$uri</span>/ /index.php?<span class=\"variable\">$query_string</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"section\">location</span> <span class=\"regexp\">~ \\.php$</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">try_files</span> <span class=\"variable\">$uri</span> =<span class=\"number\">404</span>;</span><br><span class=\"line\">        <span class=\"attribute\">fastcgi_split_path_info</span><span class=\"regexp\"> ^(.+\\.php)(/.+)$</span>;</span><br><span class=\"line\">        <span class=\"comment\"># 注意这里的 fastcgi_pass 指向的是 app 服务的名称和端口</span></span><br><span class=\"line\">        <span class=\"attribute\">fastcgi_pass</span> app:<span class=\"number\">9000</span>;</span><br><span class=\"line\">        <span class=\"attribute\">fastcgi_index</span> index.php;</span><br><span class=\"line\">        <span class=\"attribute\">include</span> fastcgi_params;</span><br><span class=\"line\">        <span class=\"attribute\">fastcgi_param</span> SCRIPT_FILENAME <span class=\"variable\">$document_root</span><span class=\"variable\">$fastcgi_script_name</span>;</span><br><span class=\"line\">        <span class=\"attribute\">fastcgi_param</span> PATH_INFO <span class=\"variable\">$fastcgi_path_info</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"section\">location</span> <span class=\"regexp\">~ /\\.ht</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">deny</span> all;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-docker-compose-prod-yml\"><a href=\"#3-docker-compose-prod-yml\" class=\"headerlink\" title=\"3. docker-compose.prod.yml\"></a><strong>3. docker-compose.prod.yml</strong></h3><p>此文件是 Docker Compose 的服务编排配置，定义了应用所需的所有服务：PHP 应用、Nginx、MySQL、Redis 和队列处理器。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"comment\"># 1. Laravel 应用服务 (PHP-FPM)</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span></span><br><span class=\"line\">      <span class=\"attr\">context:</span> <span class=\"string\">.</span></span><br><span class=\"line\">      <span class=\"attr\">dockerfile:</span> <span class=\"string\">docker-prod/app/Dockerfile</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lynx_app</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">working_dir:</span> <span class=\"string\">/var/www/html</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./:/var/www/html</span></span><br><span class=\"line\">      <span class=\"comment\"># 使用匿名卷保护镜像中已构建的 vendor 和 node_modules 目录不被宿主机覆盖</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/www/html/vendor</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/www/html/node_modules</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">lynx-network</span></span><br><span class=\"line\">    <span class=\"comment\"># 确保 App 在数据库和 Redis 健康后才启动</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"attr\">mysql:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_healthy</span></span><br><span class=\"line\">      <span class=\"attr\">redis:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_healthy</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 2. Nginx 服务</span></span><br><span class=\"line\">  <span class=\"attr\">nginx:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">nginx:alpine</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lynx_nginx</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;80:80&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;443:443&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./:/var/www/html</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./docker-prod/nginx/default.conf:/etc/nginx/conf.d/default.conf</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./docker-prod/certs:/etc/nginx/certs</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">app</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">lynx-network</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 3. MySQL 数据库服务</span></span><br><span class=\"line\">  <span class=\"attr\">mysql:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">mysql:8.0</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lynx_mysql</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">MYSQL_DATABASE:</span> <span class=\"string\">$&#123;DB_DATABASE&#125;</span></span><br><span class=\"line\">      <span class=\"attr\">MYSQL_ROOT_PASSWORD:</span> <span class=\"string\">$&#123;DB_PASSWORD&#125;</span></span><br><span class=\"line\">      <span class=\"attr\">MYSQL_PASSWORD:</span> <span class=\"string\">$&#123;DB_PASSWORD&#125;</span></span><br><span class=\"line\">      <span class=\"attr\">MYSQL_USER:</span> <span class=\"string\">$&#123;DB_USERNAME&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">lynx_mysql_data:/var/lib/mysql</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;3306:3306&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">lynx-network</span></span><br><span class=\"line\">    <span class=\"comment\"># 从 Sail 借鉴的健康检查，确保数据库服务真正可用</span></span><br><span class=\"line\">    <span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">      <span class=\"attr\">test:</span> [<span class=\"string\">&quot;CMD&quot;</span>, <span class=\"string\">&quot;mysqladmin&quot;</span>, <span class=\"string\">&quot;ping&quot;</span>, <span class=\"string\">&quot;-p$&#123;DB_PASSWORD&#125;&quot;</span>]</span><br><span class=\"line\">      <span class=\"attr\">retries:</span> <span class=\"number\">3</span></span><br><span class=\"line\">      <span class=\"attr\">timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 4. Redis 服务</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">redis:alpine</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lynx_redis</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">lynx_redis_data:/data</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">lynx-network</span></span><br><span class=\"line\">    <span class=\"comment\"># 从 Sail 借鉴的健康检查，确保 Redis 服务真正可用</span></span><br><span class=\"line\">    <span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">      <span class=\"attr\">test:</span> [<span class=\"string\">&quot;CMD&quot;</span>, <span class=\"string\">&quot;redis-cli&quot;</span>, <span class=\"string\">&quot;ping&quot;</span>]</span><br><span class=\"line\">      <span class=\"attr\">retries:</span> <span class=\"number\">3</span></span><br><span class=\"line\">      <span class=\"attr\">timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 5. Laravel Queue Worker 服务</span></span><br><span class=\"line\">  <span class=\"attr\">queue-worker:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span></span><br><span class=\"line\">      <span class=\"attr\">context:</span> <span class=\"string\">.</span></span><br><span class=\"line\">      <span class=\"attr\">dockerfile:</span> <span class=\"string\">docker-prod/app/Dockerfile</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lynx_queue_worker</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">php</span> <span class=\"string\">artisan</span> <span class=\"string\">queue:work</span> <span class=\"string\">--verbose</span> <span class=\"string\">--tries=3</span> <span class=\"string\">--timeout=90</span></span><br><span class=\"line\">    <span class=\"attr\">working_dir:</span> <span class=\"string\">/var/www/html</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./:/var/www/html</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/www/html/vendor</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/www/html/node_modules</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">lynx-network</span></span><br><span class=\"line\">    <span class=\"comment\"># 确保 Worker 也在数据库和 Redis 健康后才启动</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"attr\">mysql:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_healthy</span></span><br><span class=\"line\">      <span class=\"attr\">redis:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_healthy</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 定义网络</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">lynx-network:</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 定义数据卷 (用于持久化)</span></span><br><span class=\"line\"><span class=\"attr\">volumes:</span></span><br><span class=\"line\">  <span class=\"attr\">lynx_mysql_data:</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">local</span></span><br><span class=\"line\">  <span class=\"attr\">lynx_redis_data:</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">local</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-dockerignore\"><a href=\"#4-dockerignore\" class=\"headerlink\" title=\"4. .dockerignore\"></a><strong>4. .dockerignore</strong></h3><p>此文件用于指定在构建 Docker 镜像时需要忽略的文件和目录，可以显著减小镜像体积并提高构建速度。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.git</span><br><span class=\"line\">.github</span><br><span class=\"line\">.gitignore</span><br><span class=\"line\"></span><br><span class=\"line\">.env</span><br><span class=\"line\">.env.example</span><br><span class=\"line\"></span><br><span class=\"line\">/vendor/</span><br><span class=\"line\">/node_modules/</span><br><span class=\"line\"></span><br><span class=\"line\">docker-compose.yml</span><br><span class=\"line\">/docker/</span><br><span class=\"line\"></span><br><span class=\"line\">.idea</span><br><span class=\"line\">.vscode</span><br><span class=\"line\">*.DS_Store</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"六、总结\"><a href=\"#六、总结\" class=\"headerlink\" title=\"六、总结\"></a><strong>六、总结</strong></h2><p>至此将 Laravel 项目通过 Docker 进行生产环境部署的完整流程已介绍完毕。这套方案具有以下特点：</p>\n<ul>\n<li>✅ <strong>容器化</strong>：所有服务通过 Docker 隔离运行，环境一致性强</li>\n<li>✅ <strong>易于部署</strong>：一键构建和启动，减少环境配置问题</li>\n<li>✅ <strong>生产优化</strong>：包含 SSL 支持、健康检查、自动重启等生产级特性</li>\n<li>✅ <strong>易于维护</strong>：提供完整的日常运维命令，代码更新流程清晰</li>\n<li>✅ <strong>可扩展性</strong>：基于 Docker Compose，方便后续添加其他服务</li>\n</ul>\n<p>如果在部署过程中遇到问题，请检查：</p>\n<ol>\n<li>Docker Desktop 是否正常运行</li>\n<li>端口 80、443、3306 是否被占用</li>\n<li>.env 文件中的配置是否正确</li>\n<li>storage 目录权限是否正确设置</li>\n</ol>\n",
            "tags": [
                "Laravel",
                "Docker",
                "容器化",
                "部署",
                "运维"
            ]
        }
    ]
}