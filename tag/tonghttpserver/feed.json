{
    "version": "https://jsonfeed.org/version/1",
    "title": "雪漫城的风宅 • All posts by \"tonghttpserver\" tag",
    "description": "この世界は好都合に未完成 だから知りたいんだ —— チ。-地球の運動について-",
    "home_page_url": "https://nightingalewk.cn",
    "items": [
        {
            "id": "https://nightingalewk.cn/2025/09/29/77.%20%E4%B8%9C%E6%96%B9%E9%80%9A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%BD%AF%E4%BB%B6%20TongHttpServer%20V6.0%20%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/",
            "url": "https://nightingalewk.cn/2025/09/29/77.%20%E4%B8%9C%E6%96%B9%E9%80%9A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%BD%AF%E4%BB%B6%20TongHttpServer%20V6.0%20%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/",
            "title": "东方通负载均衡软件 TongHttpServer V6.0 安装步骤",
            "date_published": "2025-09-29T06:00:00.000Z",
            "content_html": "<h2 id=\"1-写在前面\"><a href=\"#1-写在前面\" class=\"headerlink\" title=\"1. 写在前面\"></a>1. 写在前面</h2><p>本文的出发点是公司开始信创化改造工作，需要对已有的工具进行国产化替换。我计划使用东方通负载均衡软件 TongHttpServer V6.0 替换经常使用的 Nginx，之后我将简称 TongHttpServer 为 ths。本文则是在此情况下编写的。</p>\n<h2 id=\"2-前期准备\"><a href=\"#2-前期准备\" class=\"headerlink\" title=\"2. 前期准备\"></a>2. 前期准备</h2><p>首先需要一台国产化服务器，这里公司给我开了一台虚机，使用的是银河麒麟操作系统 v10</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@zyzdsz-01 bin]# uname -a</span><br><span class=\"line\">Linux zyzdsz-01 4.19.90-17.ky10.aarch64 #1 SMP Sun Jun 28 14:27:40 CST 2020 aarch64 aarch64 aarch64 GNU/Linux</span><br></pre></td></tr></table></figure>\n\n<p>硬件方面，我申请的是 8C 16G 300GB 的配置，处理器也是信创的飞腾 2000+，是一颗 ARM 架构处理器。IP 则为我分配的是 10.1.100.11，同时开通外网访问能力，但无法通过外网访问到本机，ssh 和 ftp 等操作需要使用跳板机（10.1.120. 段均可）跳转使用</p>\n<p>这里跳板机使用的是 10.1.120.11，一台 windows server 服务器。后续将使用这台服务器访问 ths 的控制面板。</p>\n<h2 id=\"3-工具申请\"><a href=\"#3-工具申请\" class=\"headerlink\" title=\"3. 工具申请\"></a>3. 工具申请</h2><p>东方通的官方提供测试版本安装包，在官方发起试用申请，稍后会有专门的工作人员加你微信，根据提示交流后，将会给你百度网盘上的安装包和试用证书。</p>\n<h2 id=\"4-安装\"><a href=\"#4-安装\" class=\"headerlink\" title=\"4. 安装\"></a>4. 安装</h2><p>我们在服务器的 &#x2F;opt 目录下将安装包的压缩包放在这里，并解压缩</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /opt</span><br><span class=\"line\">unzip THS6.0.1.3.zip</span><br></pre></td></tr></table></figure>\n\n<p>根据操作系统和处理器特征，我们需要使用 linux 版本下的 aarch64 架构下的 TongHttpServer_6.0.1.3_alpine_aarch64.tar.gz 这个压缩包的内容，我们解压一下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /opt/THS6.0.1.3/linux</span><br><span class=\"line\">tar -zxvf TongHttpServer_6.0.1.3_alpine_aarch64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>解压后将得到一个 THS 的压缩包，这就是本体的全部内容了</p>\n<h2 id=\"5-防火墙放行\"><a href=\"#5-防火墙放行\" class=\"headerlink\" title=\"5. 防火墙放行\"></a>5. 防火墙放行</h2><p>工具需要的访问端口，我们需要在系统的防火墙上进行放行，具体为：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=8000/tcp --permanent  # console 管理端界面</span><br><span class=\"line\">firewall-cmd --add-port=8080/tcp --permanent  # 默认访问的端口</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --reload  # 使刚才的配置生效</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --list-all  # 查看具体的配置</span><br></pre></td></tr></table></figure>\n\n<p>我们可以去 windows server 服务器上测试一下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">验证 8080 端口</span></span><br><span class=\"line\">telnet 10.1.100.11 8080</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">验证 8000 端口</span></span><br><span class=\"line\">telnet 10.1.100.11 8000</span><br></pre></td></tr></table></figure>\n\n<p>如果端口是通的（成功）：命令行窗口会变黑，并且只有一个闪烁的光标。这意味着您的 Windows Server 成功连接到了 Linux 主机上的该端口。</p>\n<p>如果端口不通（失败）：命令可能会卡住一段时间，然后显示类似 “无法打开到主机的连接，在端口 xxxx: 连接失败” 或 “正在连接到…” 后直接退出。这表明连接被防火墙拒绝或 Linux 主机上没有程序在监听该端口。</p>\n<h2 id=\"6-THS-服务启动\"><a href=\"#6-THS-服务启动\" class=\"headerlink\" title=\"6. THS 服务启动\"></a>6. THS 服务启动</h2><p>前往 THS 根目录，启动我们需要的服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /opt/THS6.0.1.3/linux/bin</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">./start</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">若需要停止，则：</span></span><br><span class=\"line\">./start.sh stop</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">热加载为：</span></span><br><span class=\"line\">./start.sh reload</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">优雅停止为：</span></span><br><span class=\"line\">./start.sh -s quit</span><br></pre></td></tr></table></figure>\n\n<p>我们再启动 console 控制台</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /opt/THS6.0.1.3/linux/bin</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">./startConsole.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">若需要停止，则：</span></span><br><span class=\"line\">./startConsole.sh stop</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启为：</span></span><br><span class=\"line\">./startConsole.sh reload</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重置密码为：</span></span><br><span class=\"line\">./startConsole.sh -passwd=THS#123.com#</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"验证\"><a href=\"#验证\" class=\"headerlink\" title=\"验证\"></a>验证</h2><p>至此，我们的服务正常启动了，同时控制台也可以访问了，我们测试一下服务。前往 windows server 服务器，打开浏览器，访问 <code>http://10.1.100.11:8080/</code> 可看到空白默认页</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Welcome to TongHttpServer!<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">body</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">35em</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">font-family</span>: Tahoma, Verdana, Arial, sans-serif;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Welcome to TongHttpServer!<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      If you see this page, the web server is successfully installed and</span><br><span class=\"line\">      working. Further configuration is required.</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>Thank you for using TongHttpServer.<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>访问 console 控制台 <code>http://10.1.100.11:8000/admin/login</code> 输入默认账号密码 <code>admin</code> 与 <code>Ths#123.com</code>，首次访问需要修改密码，跟着改了就行。</p>\n<p>对 THS 的全部配置均可在控制台中进行，操作完不用了记得关闭控制台</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /opt/THS6.0.1.3/linux/bin</span><br><span class=\"line\"></span><br><span class=\"line\">./startConsole.sh stop</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "国产化",
                "信创",
                "TongHttpServer"
            ]
        }
    ]
}