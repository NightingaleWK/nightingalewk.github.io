{
    "version": "https://jsonfeed.org/version/1",
    "title": "雪漫城的风宅 • All posts by \"artisan\" tag",
    "description": "この世界は好都合に未完成 だから知りたいんだ —— チ。-地球の運動について-",
    "home_page_url": "https://nightingalewk.cn",
    "items": [
        {
            "id": "https://nightingalewk.cn/2026/01/25/85.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/25/85.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（日常使用篇）",
            "date_published": "2026-01-25T02:00:00.000Z",
            "content_html": "<h2 id=\"容器化开发范式-（Development-Paradigm）\"><a href=\"#容器化开发范式-（Development-Paradigm）\" class=\"headerlink\" title=\"容器化开发范式 （Development Paradigm）\"></a>容器化开发范式 （Development Paradigm）</h2><p>迁移至 Sail 环境后，开发者的核心工作流将发生本质变化：<strong>从调用本机二进制文件转向调用容器内运行时</strong>。</p>\n<p>Sail 本质上封装了 <code>docker-compose exec</code> 指令。所有开发命令均应通过 <code>sail</code> 代理执行，以确保运行环境与生产环境（容器镜像）的高度一致性。</p>\n<p><strong>映射关系示例</strong>：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">本地命令 （Deprecated）</th>\n<th align=\"left\">容器化命令 （Recommended）</th>\n<th align=\"left\">执行上下文</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><code>php artisan ...</code></td>\n<td align=\"left\"><code>sail artisan ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 （PHP CLI）</td>\n</tr>\n<tr>\n<td align=\"left\"><code>composer ...</code></td>\n<td align=\"left\"><code>sail composer ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 （Composer）</td>\n</tr>\n<tr>\n<td align=\"left\"><code>npm run ...</code></td>\n<td align=\"left\"><code>sail npm run ...</code></td>\n<td align=\"left\"><code>laravel.test</code> 容器 （Node）</td>\n</tr>\n<tr>\n<td align=\"left\"><code>mysql</code></td>\n<td align=\"left\"><code>sail mysql</code></td>\n<td align=\"left\"><code>mysql</code> 容器</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"1-后端工作流：Artisan-Composer\"><a href=\"#1-后端工作流：Artisan-Composer\" class=\"headerlink\" title=\"1. 后端工作流：Artisan &amp; Composer\"></a>1. 后端工作流：Artisan &amp; Composer</h2><h3 id=\"1-1-Artisan-CLI\"><a href=\"#1-1-Artisan-CLI\" class=\"headerlink\" title=\"1.1 Artisan CLI\"></a>1.1 Artisan CLI</h3><p>在容器内执行 Artisan 命令，无需在宿主机配置 PHP 环境。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 生成资源 （Controller, Model, etc.）</span></span><br><span class=\"line\">sail artisan make:model Order -m</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 执行数据库迁移</span></span><br><span class=\"line\">sail artisan migrate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 开启队列监听</span></span><br><span class=\"line\">sail artisan queue:work</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-依赖管理-（Composer）\"><a href=\"#1-2-依赖管理-（Composer）\" class=\"headerlink\" title=\"1.2 依赖管理 （Composer）\"></a>1.2 依赖管理 （Composer）</h3><p>使用 Sail 管理依赖可解决 PHP 版本不匹配问题（例如宿主机 PHP 8.0 而项目需 PHP 8.2）。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装生产依赖</span></span><br><span class=\"line\">sail composer require guzzlehttp/guzzle</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装开发依赖</span></span><br><span class=\"line\">sail composer require laravel/pint --dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 执行自动加载优化</span></span><br><span class=\"line\">sail composer dump-autoload -o</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"2-前端工作流：Node-Vite\"><a href=\"#2-前端工作流：Node-Vite\" class=\"headerlink\" title=\"2. 前端工作流：Node &amp; Vite\"></a>2. 前端工作流：Node &amp; Vite</h2><p>Sail 默认集成了 Node.js 运行时，支持现代化的前端构建流程。这意味着宿主机也<strong>无需安装 Node&#x2F;NPM</strong>。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装前端依赖</span></span><br><span class=\"line\">sail npm install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 启动开发服务器 （HMR hot-reload enabled）</span></span><br><span class=\"line\">sail npm run dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 构建生产资源</span></span><br><span class=\"line\">sail npm run build</span><br></pre></td></tr></table></figure>\n\n<p>Sail 会自动处理 Docker 端口映射（默认 5173），确保 WSL2 中的 Vite Server 可被宿主机浏览器访问。</p>\n<hr>\n<h2 id=\"3-服务生命周期管理\"><a href=\"#3-服务生命周期管理\" class=\"headerlink\" title=\"3. 服务生命周期管理\"></a>3. 服务生命周期管理</h2><p>基于 Docker Compose 的服务治理。</p>\n<ul>\n<li><strong>启动服务栈</strong> （Detached Mode）:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail up -d</span><br></pre></td></tr></table></figure></li>\n<li><strong>停止服务栈</strong>:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail stop</span><br></pre></td></tr></table></figure></li>\n<li><strong>查看容器状态</strong>:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail ps</span><br></pre></td></tr></table></figure>\n<em>Output 示例</em>:<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NAME                    COMMAND                  STATUS              PORTS</span><br><span class=\"line\">example-app-laravel.test-1   &quot;start-container&quot;        Up                  0.0.0.0:80-&gt;80/tcp</span><br><span class=\"line\">example-app-mysql-1          &quot;docker-entrypoint...&quot;   Up                  0.0.0.0:3306-&gt;3306/tcp</span><br></pre></td></tr></table></figure></li>\n</ul>\n<hr>\n<h2 id=\"4-容器访问与调试\"><a href=\"#4-容器访问与调试\" class=\"headerlink\" title=\"4. 容器访问与调试\"></a>4. 容器访问与调试</h2><h3 id=\"4-1-Shell-Access\"><a href=\"#4-1-Shell-Access\" class=\"headerlink\" title=\"4.1 Shell Access\"></a>4.1 Shell Access</h3><p>在特定场景下（如检查日志、手动调试脚本），需直接进入容器 Shell：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 以 workspace 用户 （sail） 进入应用容器</span></span><br><span class=\"line\">sail shell</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 以 root 用户进入 （主要用于安装系统级依赖）</span></span><br><span class=\"line\">sail root-shell</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-2-临时站点共享-（Expose）\"><a href=\"#4-2-临时站点共享-（Expose）\" class=\"headerlink\" title=\"4.2 临时站点共享 （Expose）\"></a>4.2 临时站点共享 （Expose）</h3><p>基于 <code>ngrok</code> 或 <code>expose</code> 的隧道服务，将本地开发环境暴露至公网，便于 Webhook 调试或远程演示。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail share</span><br></pre></td></tr></table></figure>\n<p>执行后将获得一个 <code>http://&lt;random&gt;.sharedwithexpose.com</code> 的公网链接。</p>\n<hr>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>Sail 构建了一套完整的 <strong>容器化工具链 （Containerized Toolchain）</strong>。通过简单的 CLI 封装，它屏蔽了 Docker 底层的复杂性，同时保留了容器化开发的所有优势：隔离、一致、可移植。</p>\n<p>在下一章《疑难杂症篇》中，我们将深入解决 Docker 环境下常见的运行时问题（网络、IO、权限）。</p>\n",
            "tags": [
                "Laravel",
                "Sail",
                "Artisan",
                "Composer"
            ]
        }
    ]
}