<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://nightingalewk.cn</id>
    <title>雪漫城的风宅 • Posts by &#34;git&#34; tag</title>
    <link href="https://nightingalewk.cn" />
    <updated>2026-01-24T02:00:00.000Z</updated>
    <category term="迁移" />
    <category term="hexo" />
    <category term="主食" />
    <category term="电脑维修" />
    <category term="学习笔记" />
    <category term="pr" />
    <category term="bilibili" />
    <category term="热菜" />
    <category term="汤" />
    <category term="甜品" />
    <category term="梦境" />
    <category term="海鲜" />
    <category term="homestead" />
    <category term="代码部署" />
    <category term="oneinstack" />
    <category term="lnmp" />
    <category term="代码更新" />
    <category term="dcat admin" />
    <category term="oh-my-zsh" />
    <category term="debug" />
    <category term="指令" />
    <category term="道歉信" />
    <category term="免密" />
    <category term="vs code" />
    <category term="fileinfo" />
    <category term="PAC 清单" />
    <category term="定时任务" />
    <category term="gpg" />
    <category term="laravel sail" />
    <category term="sshppass" />
    <category term="awk" />
    <category term="net time" />
    <category term="swap" />
    <category term="端口查询" />
    <category term="表单验证" />
    <category term="blade" />
    <category term="wordpress" />
    <category term="事件" />
    <category term="队列" />
    <category term="redis" />
    <category term="特色小吃" />
    <category term="粥" />
    <category term="Cloudreve" />
    <category term="artisan 指令" />
    <category term="故障排除" />
    <category term="Font Awesome" />
    <category term="vite" />
    <category term="linux" />
    <category term="我的世界" />
    <category term="Minecraft" />
    <category term="膝盖中箭之地" />
    <category term="领域" />
    <category term="realms" />
    <category term="公告" />
    <category term="screen" />
    <category term="打印机" />
    <category term="京瓷" />
    <category term="教程" />
    <category term="cursor" />
    <category term="人工智能" />
    <category term="prompt" />
    <category term="Git" />
    <category term="GitHub" />
    <category term="版本控制" />
    <category term="Monorepo" />
    <category term="DevOps" />
    <category term="Laravel" />
    <category term="Docker" />
    <category term="容器化" />
    <category term="部署" />
    <category term="运维" />
    <category term="Ubuntu" />
    <category term="安装指南" />
    <category term="阿里云" />
    <category term="镜像源" />
    <category term="国产化" />
    <category term="信创" />
    <category term="TongHttpServer" />
    <category term="Rule" />
    <category term="Prompt" />
    <category term="gemini" />
    <category term="Sail" />
    <category term="Nginx" />
    <category term="反向代理" />
    <category term="NPM" />
    <category term="HTTPS" />
    <category term="问题排查" />
    <category term="WSL2" />
    <category term="Troubleshooting" />
    <category term="Hardware" />
    <category term="Tooling" />
    <category term="Artisan" />
    <category term="Composer" />
    <entry>
        <id>https://nightingalewk.cn/2026/01/24/84.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88Git%20%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%9A%E6%9C%BA%E5%BC%80%E5%8F%91%E7%AF%87%EF%BC%89/</id>
        <title>Laravel Sail 开发环境部署一把过（Git 同步与多机开发篇）</title>
        <link rel="alternate" href="https://nightingalewk.cn/2026/01/24/84.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88Git%20%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%9A%E6%9C%BA%E5%BC%80%E5%8F%91%E7%AF%87%EF%BC%89/"/>
        <content type="html">&lt;h1 id=&#34;场景描述&#34;&gt;&lt;a href=&#34;#场景描述&#34; class=&#34;headerlink&#34; title=&#34;场景描述&#34;&gt;&lt;/a&gt;场景描述&lt;/h1&gt;&lt;p&gt;上一篇我们成功在电脑 A（比如公司电脑）上搭建了环境并运行了 Laravel。&lt;br&gt;现在的问题是：&lt;strong&gt;我下班回家了，想用家里的电脑 B 接着写，该怎么办？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;很多人会卡在这里，因为 Laravel 项目默认的 &lt;code&gt;.gitignore&lt;/code&gt; 规则会忽略 &lt;code&gt;vendor&lt;/code&gt; 目录（存放依赖包的地方）和 &lt;code&gt;.env&lt;/code&gt; 文件（存放敏感配置的地方）。&lt;br&gt;而 &lt;code&gt;sail&lt;/code&gt; 命令脚本本身就躺在 &lt;code&gt;vendor/bin&lt;/code&gt; 目录下。&lt;/p&gt;
&lt;p&gt;这意味着：&lt;strong&gt;当你把代码拉到新电脑上时，你没有 &lt;code&gt;vendor&lt;/code&gt; 目录，也就没有 &lt;code&gt;sail&lt;/code&gt; 命令。你无法启动 Sail，也就无法用 Sail 安装 &lt;code&gt;vendor&lt;/code&gt;……&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这就陷入了一个“先有鸡还是先有蛋”的死循环。&lt;br&gt;别慌，本文就是为了解决这个问题而生的。&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;第一步：在电脑-A-提交代码&#34;&gt;&lt;a href=&#34;#第一步：在电脑-A-提交代码&#34; class=&#34;headerlink&#34; title=&#34;第一步：在电脑 A 提交代码&#34;&gt;&lt;/a&gt;第一步：在电脑 A 提交代码&lt;/h1&gt;&lt;p&gt;首先，我们需要把项目上传到代码仓库（GitHub &amp;#x2F; GitLab &amp;#x2F; Gitee）。这里以 GitHub 为例。&lt;/p&gt;
&lt;p&gt;确保你在 WSL 的项目根目录下（比如 &lt;code&gt;~/code/example-app&lt;/code&gt;）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;初始化 Git 仓库&lt;/strong&gt;（如果还没初始化）：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git init&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git checkout -b main&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;提交代码&lt;/strong&gt;：&lt;br&gt;Laravel 默认的 &lt;code&gt;.gitignore&lt;/code&gt; 已经非常完善了，千万&lt;strong&gt;不要&lt;/strong&gt;手动去把 &lt;code&gt;vendor&lt;/code&gt; 或 &lt;code&gt;.env&lt;/code&gt; 强行加进来。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git add -A&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git commit -m &lt;span class=&#34;string&#34;&gt;&amp;quot;Initial commit&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;推送到远程仓库&lt;/strong&gt;：&lt;br&gt;先在 GitHub 创建一个空仓库，然后关联并推送：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git remote add origin git@github.com:your-username/your-repo.git&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git push -u origin main&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id=&#34;第二步：在电脑-B-拉取代码&#34;&gt;&lt;a href=&#34;#第二步：在电脑-B-拉取代码&#34; class=&#34;headerlink&#34; title=&#34;第二步：在电脑 B 拉取代码&#34;&gt;&lt;/a&gt;第二步：在电脑 B 拉取代码&lt;/h1&gt;&lt;p&gt;现在我们来到了&lt;strong&gt;电脑 B&lt;/strong&gt;（比如家里的电脑）。&lt;br&gt;&lt;strong&gt;前提&lt;/strong&gt;：这台电脑也必须安装好 &lt;strong&gt;WSL2&lt;/strong&gt; 和 &lt;strong&gt;Docker Desktop&lt;/strong&gt;（参考上一篇教程）。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;克隆代码&lt;/strong&gt;：&lt;br&gt;打开 Ubuntu 终端，进入我们规定的代码存放目录（如果不存在则先创建）：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; -p ~/code&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; ~/code&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git &lt;span class=&#34;built_in&#34;&gt;clone&lt;/span&gt; git@github.com:your-username/your-repo.git project-b&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; project-b&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;此时的尴尬现状&lt;/strong&gt;：&lt;br&gt;如果你现在尝试运行 &lt;code&gt;./vendor/bin/sail up&lt;/code&gt;，系统会无情地告诉你：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;bash: ./vendor/bin/sail: No such file or directory&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;原因前面说了：Git 不会同步 &lt;code&gt;vendor&lt;/code&gt; 目录。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id=&#34;第三步：解决“鸡生蛋”问题（安装依赖）&#34;&gt;&lt;a href=&#34;#第三步：解决“鸡生蛋”问题（安装依赖）&#34; class=&#34;headerlink&#34; title=&#34;第三步：解决“鸡生蛋”问题（安装依赖）&#34;&gt;&lt;/a&gt;第三步：解决“鸡生蛋”问题（安装依赖）&lt;/h1&gt;&lt;p&gt;我们需要在没有 &lt;code&gt;sail&lt;/code&gt; 的情况下，利用 Docker 帮我们运行一次 Composer 安装命令。&lt;br&gt;Laravel 官方非常贴心地提供了一个一次性的 Docker 运行命令，专门用来处理这个“初次引导”的问题。&lt;/p&gt;
&lt;p&gt;在项目根目录下，执行下面这行&lt;strong&gt;神奇的长命令&lt;/strong&gt;：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;docker run --&lt;span class=&#34;built_in&#34;&gt;rm&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    -u &lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;span class=&#34;subst&#34;&gt;$(id -u)&lt;/span&gt;:&lt;span class=&#34;subst&#34;&gt;$(id -g)&lt;/span&gt;&amp;quot;&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    -v &lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;span class=&#34;subst&#34;&gt;$(pwd)&lt;/span&gt;:/var/www/html&amp;quot;&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    -w /var/www/html \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    laravelsail/php82-composer:latest \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    composer install --ignore-platform-reqs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;em&gt;解析：&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这是一个临时的 Docker 容器，用完即焚 (&lt;code&gt;--rm&lt;/code&gt;)。&lt;/li&gt;
&lt;li&gt;它挂载了当前目录 (&lt;code&gt;-v&lt;/code&gt;)，并使用当前用户的权限 (&lt;code&gt;-u&lt;/code&gt;)。&lt;/li&gt;
&lt;li&gt;它使用的是 &lt;code&gt;php82-composer&lt;/code&gt; 镜像（如果你用的是 PHP 8.1 或 8.0，改一下数字即可）。&lt;/li&gt;
&lt;li&gt;它执行了 &lt;code&gt;composer install&lt;/code&gt;，帮我们把 &lt;code&gt;vendor&lt;/code&gt; 目录及里面的 &lt;code&gt;sail&lt;/code&gt; 脚本都下载回来了！&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;等待命令执行完成&lt;/strong&gt;（具体取决于网速），你会发现项目里多了一个 &lt;code&gt;vendor&lt;/code&gt; 文件夹。&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;第四步：配置环境与启动&#34;&gt;&lt;a href=&#34;#第四步：配置环境与启动&#34; class=&#34;headerlink&#34; title=&#34;第四步：配置环境与启动&#34;&gt;&lt;/a&gt;第四步：配置环境与启动&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;恢复配置文件&lt;/strong&gt;：&lt;br&gt;由于 &lt;code&gt;.env&lt;/code&gt; 被 Git 忽略了，我们需要从模版复制一份：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cp&lt;/span&gt; .env.example .&lt;span class=&#34;built_in&#34;&gt;env&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;注意：如果你的项目有特殊的数据库密码或 API Key，记得手动编辑 &lt;code&gt;.env&lt;/code&gt; 填进去。但在 Sail 环境下，数据库连接通常默认都在 &lt;code&gt;docker-compose.yml&lt;/code&gt; 里配置好了环境变量，直接用可能就行。&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;启动 Sail&lt;/strong&gt;：&lt;br&gt;现在 &lt;code&gt;vendor&lt;/code&gt; 有了，我们终于可以召唤神龙了（记得像上一篇一样配置好 &lt;code&gt;sail&lt;/code&gt; 别名）：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sail up -d&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;生成应用密钥&lt;/strong&gt;：&lt;br&gt;新的 &lt;code&gt;.env&lt;/code&gt; 里 &lt;code&gt;APP_KEY&lt;/code&gt; 是空的，需要生成一个：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sail artisan key:generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;运行数据库迁移&lt;/strong&gt;：&lt;br&gt;全新的环境数据库是空的，需要创建表结构：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sail artisan migrate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id=&#34;第五步：验证&#34;&gt;&lt;a href=&#34;#第五步：验证&#34; class=&#34;headerlink&#34; title=&#34;第五步：验证&#34;&gt;&lt;/a&gt;第五步：验证&lt;/h1&gt;&lt;p&gt;打开浏览器访问 &lt;code&gt;http://localhost&lt;/code&gt;。&lt;br&gt;你应该能看到与公司电脑一模一样的项目已经在运行了。&lt;/p&gt;
&lt;p&gt;从此以后，你只需要：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;在公司&lt;/strong&gt;：写代码 -&amp;gt; &lt;code&gt;git push&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在家里&lt;/strong&gt;：&lt;code&gt;git pull&lt;/code&gt; -&amp;gt; &lt;code&gt;./vendor/bin/sail up -d&lt;/code&gt; -&amp;gt; 开造！&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;这就是 Docker + Sail 带来的极致一致性体验。&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;总结&#34;&gt;&lt;a href=&#34;#总结&#34; class=&#34;headerlink&#34; title=&#34;总结&#34;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;本篇解决了异地开发最麻烦的“环境同步”和“依赖安装”问题。&lt;br&gt;核心技巧在于那行&lt;strong&gt;用于“引导”的 Docker 命令&lt;/strong&gt;，它帮我们跨越了“没有 PHP 环境就没法安装 Sail，没有 Sail 就没法启动 PHP 环境”的鸿沟。&lt;/p&gt;
&lt;p&gt;下一篇，我们将进入实战深水区：&lt;strong&gt;《日常使用篇》&lt;/strong&gt;，教你如何像在本地一样运行 Artisan 命令、使用 npm 编译前端、以及配置 Shell 别名让 &lt;code&gt;sail&lt;/code&gt; 变成更短的 &lt;code&gt;s&lt;/code&gt;。&lt;/p&gt;
</content>
        <category term="Git" />
        <category term="GitHub" />
        <category term="Laravel" />
        <category term="Sail" />
        <updated>2026-01-24T02:00:00.000Z</updated>
    </entry>
    <entry>
        <id>https://nightingalewk.cn/2025/06/26/76.%20%E4%BF%AE%E6%94%B9%E6%9C%AC%E5%9C%B0%20git%20%E4%BB%93%E5%BA%93%E7%9A%84%20remote%20%E5%9C%B0%E5%9D%80%E4%B8%BA%E6%96%B0%E5%9C%B0%E5%9D%80/</id>
        <title>修改本地 git 仓库的 remote 地址为新地址</title>
        <link rel="alternate" href="https://nightingalewk.cn/2025/06/26/76.%20%E4%BF%AE%E6%94%B9%E6%9C%AC%E5%9C%B0%20git%20%E4%BB%93%E5%BA%93%E7%9A%84%20remote%20%E5%9C%B0%E5%9D%80%E4%B8%BA%E6%96%B0%E5%9C%B0%E5%9D%80/"/>
        <content type="html">&lt;h2 id=&#34;1-我的需求&#34;&gt;&lt;a href=&#34;#1-我的需求&#34; class=&#34;headerlink&#34; title=&#34;1. 我的需求&#34;&gt;&lt;/a&gt;1. 我的需求&lt;/h2&gt;&lt;p&gt;假设本地有一个 laravel 项目，使用 git 进行版本管理，且已连接到 2 个远端的仓库，这里假设远端仓库地址为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Coding&lt;/code&gt; 的 &lt;code&gt;git@e.coding.net:nightingalewk/sushang/v2.git&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Github&lt;/code&gt; 的 &lt;code&gt;git@github.com:NightingaleWK/sushang.git&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;现在因需求变动，需要将代码上传到新的 2 个远端仓库，地址为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Gitee&lt;/code&gt; 的 &lt;code&gt;git@gitee.com:LiyueHarbor/sushang.git&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Github&lt;/code&gt; 的 &lt;code&gt;git@github.com:Liyue-Harbor/sushang.git&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意，四个地址均不一致，想要实现期望的结果，具体操作方法如下：&lt;/p&gt;
&lt;h2 id=&#34;2-解决方案&#34;&gt;&lt;a href=&#34;#2-解决方案&#34; class=&#34;headerlink&#34; title=&#34;2. 解决方案&#34;&gt;&lt;/a&gt;2. 解决方案&lt;/h2&gt;&lt;p&gt;git 无法单独修改某个地址，只能全部删除远端地址后重新设定，所以我们第一步先清理本地 laravel 项目的 remote 信息：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; sushang&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git remote remove origin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后设置新的远端地址：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git remote add origin git@gitee.com:LiyueHarbor/sushang.git&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git remote set-url --add origin git@github.com:Liyue-Harbor/sushang.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后将代码推送到 2 个新仓库中：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git push -u origin main&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
        <category term="Git" />
        <category term="DevOps" />
        <updated>2025-06-26T09:00:00.000Z</updated>
    </entry>
    <entry>
        <id>https://nightingalewk.cn/2025/06/26/75.%20%E5%A6%82%E4%BD%95%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%20Git%20%E4%BB%93%E5%BA%93%EF%BC%88Monorepo%20%E5%AE%9E%E8%B7%B5%EF%BC%89/</id>
        <title>如何合并两个独立的 Git 仓库（Monorepo 实践）</title>
        <link rel="alternate" href="https://nightingalewk.cn/2025/06/26/75.%20%E5%A6%82%E4%BD%95%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%20Git%20%E4%BB%93%E5%BA%93%EF%BC%88Monorepo%20%E5%AE%9E%E8%B7%B5%EF%BC%89/"/>
        <content type="html">&lt;p&gt;本文是一份将两个完全独立、无关联历史的 Git 仓库合并到一个新仓库（Monorepo）的完整操作指南。我们将把每个旧仓库的内容及其完整提交历史，迁移到新仓库的不同子目录中。&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;h2 id=&#34;核心思路&#34;&gt;&lt;a href=&#34;#核心思路&#34; class=&#34;headerlink&#34; title=&#34;核心思路&#34;&gt;&lt;/a&gt;核心思路&lt;/h2&gt;&lt;p&gt;我们的目标是创建一个全新的仓库 &lt;code&gt;sushang-combined&lt;/code&gt;，并将 &lt;code&gt;sushang-v1&lt;/code&gt; 和 &lt;code&gt;sushang-v2&lt;/code&gt; 两个仓库的所有内容和历史记录，分别完整地移入 &lt;code&gt;sushang-combined&lt;/code&gt; 下的 &lt;code&gt;sushang-v1/&lt;/code&gt; 和 &lt;code&gt;sushang-v2/&lt;/code&gt; 子目录中。&lt;/p&gt;
&lt;h2 id=&#34;第一阶段：环境准备&#34;&gt;&lt;a href=&#34;#第一阶段：环境准备&#34; class=&#34;headerlink&#34; title=&#34;第一阶段：环境准备&#34;&gt;&lt;/a&gt;第一阶段：环境准备&lt;/h2&gt;&lt;p&gt;首先，创建工作区，并克隆所有需要的仓库。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 1. 创建一个专门的工作目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; git-merge-project &amp;amp;&amp;amp; &lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; git-merge-project&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 2. 克隆你的两个源仓库 (请替换为你的实际URL)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git &lt;span class=&#34;built_in&#34;&gt;clone&lt;/span&gt; &amp;lt;URL_for_sushang-v1&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git &lt;span class=&#34;built_in&#34;&gt;clone&lt;/span&gt; &amp;lt;URL_for_sushang-v2&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 3. 创建并初始化最终要合并到的目标仓库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; sushang-combined&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; sushang-combined&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git init&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;第二阶段：重构源仓库&#34;&gt;&lt;a href=&#34;#第二阶段：重构源仓库&#34; class=&#34;headerlink&#34; title=&#34;第二阶段：重构源仓库&#34;&gt;&lt;/a&gt;第二阶段：重构源仓库&lt;/h2&gt;&lt;p&gt;此阶段是关键。我们需要在每个源仓库中，将所有文件移入一个与仓库同名的子目录。&lt;strong&gt;这个过程需要对 &lt;code&gt;sushang-v1&lt;/code&gt; 和 &lt;code&gt;sushang-v2&lt;/code&gt; 分别执行一次。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面以 &lt;code&gt;sushang-v1&lt;/code&gt; 为例：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 1. 进入 sushang-v1 的本地克隆目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; ../sushang-v1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 2. 创建子目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; sushang-v1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 3. 将所有文件和目录移动到新子目录中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 使用 git mv 至关重要，它能让 Git 追踪文件移动，保留历史记录！&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# -k 标志会忽略移动过程中可能出现的无关紧要的错误&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git &lt;span class=&#34;built_in&#34;&gt;mv&lt;/span&gt; -k * sushang-v1/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 4. 单独处理以点开头的隐藏文件（如 .gitignore, .github 等）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git &lt;span class=&#34;built_in&#34;&gt;mv&lt;/span&gt; .gitignore sushang-v1/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 5. 提交这次结构调整&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git commit -m &lt;span class=&#34;string&#34;&gt;&amp;quot;chore: Restructure repository for monorepo merge&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;请返回上一级目录，对 &lt;code&gt;sushang-v2&lt;/code&gt; 仓库重复上述 1-5 步。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;第三阶段：执行合并&#34;&gt;&lt;a href=&#34;#第三阶段：执行合并&#34; class=&#34;headerlink&#34; title=&#34;第三阶段：执行合并&#34;&gt;&lt;/a&gt;第三阶段：执行合并&lt;/h2&gt;&lt;p&gt;现在，所有准备工作就绪，可以开始真正的合并操作。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 1. 返回合并目标仓库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; ../sushang-combined&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 2. 合并 sushang-v1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#    将本地重构后的 sushang-v1 仓库添加为名为 v1 的远程源&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git remote add v1 ../sushang-v1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#    从 v1 拉取所有历史数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git fetch v1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#    合并 v1 的主分支，--allow-unrelated-histories 是关键！&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git merge v1/main --allow-unrelated-histories -m &lt;span class=&#34;string&#34;&gt;&amp;quot;feat: Merge sushang-v1 history&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 3. 合并 sushang-v2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#    以同样的方式添加并合并 v2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git remote add v2 ../sushang-v2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git fetch v2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git merge v2/main --allow-unrelated-histories -m &lt;span class=&#34;string&#34;&gt;&amp;quot;feat: Merge sushang-v2 history&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 4. 验证结果&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#    执行 ls，应能看到 sushang-v1 和 sushang-v2 两个目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#    执行 git log --graph --oneline --all 查看合并后的历史图谱&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;ls&lt;/span&gt; -la&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;第四阶段：发布到-GitHub&#34;&gt;&lt;a href=&#34;#第四阶段：发布到-GitHub&#34; class=&#34;headerlink&#34; title=&#34;第四阶段：发布到 GitHub&#34;&gt;&lt;/a&gt;第四阶段：发布到 GitHub&lt;/h2&gt;&lt;p&gt;将本地合并好的新仓库推送到远程。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 1. 在 GitHub 上创建一个新的、空的仓库，例如 sushang-combined&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 2. 在本地 sushang-combined 目录中，关联到你刚创建的远程仓库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git remote add origin &amp;lt;URL_for_new_github_repo&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 3. 将本地的完整历史推送到 GitHub&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#    -u 选项会建立本地 main 分支与远程 origin/main 分支的追踪关系&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git push -u origin main&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 4. (可选) 清理本地的临时远程源&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git remote &lt;span class=&#34;built_in&#34;&gt;rm&lt;/span&gt; v1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git remote &lt;span class=&#34;built_in&#34;&gt;rm&lt;/span&gt; v2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;第五阶段：归档旧仓库&#34;&gt;&lt;a href=&#34;#第五阶段：归档旧仓库&#34; class=&#34;headerlink&#34; title=&#34;第五阶段：归档旧仓库&#34;&gt;&lt;/a&gt;第五阶段：归档旧仓库&lt;/h2&gt;&lt;p&gt;为了避免混淆，并完整保留 Issues、Pull Requests 等宝贵信息，最佳实践是&lt;strong&gt;归档&lt;/strong&gt;（Archive）而不是删除旧仓库。&lt;/p&gt;
&lt;p&gt;对 &lt;code&gt;sushang-v1&lt;/code&gt; 和 &lt;code&gt;sushang-v2&lt;/code&gt; 在 GitHub 上的仓库，分别执行以下操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;更新仓库描述&lt;/strong&gt;：在仓库主页点击 “Edit”，修改描述，明确指出项目已归档，并提供新仓库 &lt;code&gt;sushang-combined&lt;/code&gt; 的链接。例如：“**[ARCHIVED]** Development continues at [link to sushang-combined].”&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;更新 README&lt;/strong&gt;：在 &lt;code&gt;README.md&lt;/code&gt; 文件顶部添加醒目通知，引导访问者前往新仓库。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;执行归档&lt;/strong&gt;：&lt;ul&gt;
&lt;li&gt;进入仓库的 &lt;code&gt;Settings&lt;/code&gt; 页面。&lt;/li&gt;
&lt;li&gt;滚动到底部的 &lt;code&gt;Danger Zone&lt;/code&gt;（危险区域）。&lt;/li&gt;
&lt;li&gt;点击 &lt;code&gt;Archive this repository&lt;/code&gt;（归档此仓库）。&lt;/li&gt;
&lt;li&gt;按提示输入仓库名称进行确认。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;至此，您已成功将两个独立仓库完整地合并为一个，并完成了所有后续整理工作。&lt;/p&gt;
</content>
        <category term="Git" />
        <category term="Monorepo" />
        <category term="DevOps" />
        <updated>2025-06-26T02:00:00.000Z</updated>
    </entry>
    <entry>
        <id>https://nightingalewk.cn/2025/06/26/74.%20%E4%BF%AE%E6%94%B9%E7%BA%BF%E4%B8%8A%20git%20%E4%BB%93%E5%BA%93%20master%20%E4%B8%BB%E5%88%86%E6%94%AF%E4%B8%BA%20main/</id>
        <title>如何将 Git 仓库的默认分支从 master 修改为 main</title>
        <link rel="alternate" href="https://nightingalewk.cn/2025/06/26/74.%20%E4%BF%AE%E6%94%B9%E7%BA%BF%E4%B8%8A%20git%20%E4%BB%93%E5%BA%93%20master%20%E4%B8%BB%E5%88%86%E6%94%AF%E4%B8%BA%20main/"/>
        <content type="html">&lt;p&gt;随着技术社区对包容性语言的倡导，将 Git 仓库的默认分支从 &lt;code&gt;master&lt;/code&gt; 修改为 &lt;code&gt;main&lt;/code&gt; 已成为一种普遍的推荐做法。本文将提供一个详细、安全的操作指南，帮助你顺利完成这一迁移。&lt;/p&gt;
&lt;p&gt;整个过程主要分为四个核心步骤，外加一个针对团队协作的同步步骤。我们将依次进行操作，确保万无一失。&lt;/p&gt;
&lt;h2 id=&#34;1-重命名本地分支&#34;&gt;&lt;a href=&#34;#1-重命名本地分支&#34; class=&#34;headerlink&#34; title=&#34;1. 重命名本地分支&#34;&gt;&lt;/a&gt;1. 重命名本地分支&lt;/h2&gt;&lt;p&gt;首先，我们需要在本地的 Git 仓库中进行操作。打开你的项目终端或命令行工具。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;切换到 &lt;code&gt;master&lt;/code&gt; 分支并拉取最新代码&lt;/strong&gt;，确保本地与远程是同步的。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;git pull origin master&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;使用 &lt;code&gt;-m&lt;/code&gt; (&lt;code&gt;--move&lt;/code&gt;) 参数重命名分支&lt;/strong&gt;。这将把本地的 &lt;code&gt;master&lt;/code&gt; 分支直接更名为 &lt;code&gt;main&lt;/code&gt;。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git branch -m master main&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行后，你的本地主分支名就修改完成了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;2-推送新分支到远程仓库&#34;&gt;&lt;a href=&#34;#2-推送新分支到远程仓库&#34; class=&#34;headerlink&#34; title=&#34;2. 推送新分支到远程仓库&#34;&gt;&lt;/a&gt;2. 推送新分支到远程仓库&lt;/h2&gt;&lt;p&gt;本地分支改名后，需要将这个新的 &lt;code&gt;main&lt;/code&gt; 分支推送到你的远程仓库（如 GitHub 或 GitLab），并建立跟踪关系。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;推送 &lt;code&gt;main&lt;/code&gt; 分支&lt;/strong&gt;。使用 &lt;code&gt;-u&lt;/code&gt; (&lt;code&gt;--set-upstream&lt;/code&gt;) 参数，这样 Git 会记住本地 &lt;code&gt;main&lt;/code&gt; 分支对应远程的 &lt;code&gt;main&lt;/code&gt; 分支，方便以后直接使用 &lt;code&gt;git push&lt;/code&gt; 和 &lt;code&gt;git pull&lt;/code&gt;。&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git push -u origin main&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
此时，你的远程仓库会同时存在 &lt;code&gt;master&lt;/code&gt; 和 &lt;code&gt;main&lt;/code&gt; 两个分支，它们的内容完全相同。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;3-修改平台的默认分支（关键步骤）&#34;&gt;&lt;a href=&#34;#3-修改平台的默认分支（关键步骤）&#34; class=&#34;headerlink&#34; title=&#34;3. 修改平台的默认分支（关键步骤）&#34;&gt;&lt;/a&gt;3. 修改平台的默认分支（关键步骤）&lt;/h2&gt;&lt;p&gt;这是整个流程中最关键的一步，必须在代码托管平台的网页上完成。**只有修改了默认分支，新的克隆 (clone) 和拉取请求 (Pull Request) 才会默认指向 &lt;code&gt;main&lt;/code&gt;**。&lt;/p&gt;
&lt;p&gt;以 &lt;strong&gt;GitHub&lt;/strong&gt; 为例：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;进入你的仓库主页，点击右上角的 &lt;strong&gt;Settings&lt;/strong&gt; (设置)。&lt;/li&gt;
&lt;li&gt;在左侧菜单栏找到并点击 &lt;strong&gt;Branches&lt;/strong&gt; (分支)。&lt;/li&gt;
&lt;li&gt;在 “Default branch” (默认分支) 区域，点击切换按钮（通常是两个箭头图标）。&lt;/li&gt;
&lt;li&gt;在弹出的窗口中，将默认分支从 &lt;code&gt;master&lt;/code&gt; 选为 &lt;code&gt;main&lt;/code&gt;，然后点击 &lt;strong&gt;Update&lt;/strong&gt; 确认。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;其他平台（如 GitLab, Gitee）的操作也类似，通常都在仓库的“设置”或“仓库管理”中的“分支”选项里。&lt;/p&gt;
&lt;h2 id=&#34;4-清理远程的-master-分支&#34;&gt;&lt;a href=&#34;#4-清理远程的-master-分支&#34; class=&#34;headerlink&#34; title=&#34;4. 清理远程的 master 分支&#34;&gt;&lt;/a&gt;4. 清理远程的 master 分支&lt;/h2&gt;&lt;p&gt;在确认 &lt;code&gt;main&lt;/code&gt; 已成为默认分支，并且所有相关的自动化流程（如 CI&amp;#x2F;CD）都已更新后，你就可以安全地删除远程的 &lt;code&gt;master&lt;/code&gt; 分支了，以避免团队成员产生混淆。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;执行删除命令&lt;/strong&gt;：&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;git push origin --delete master&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;至此，你的仓库就完全迁移到 &lt;code&gt;main&lt;/code&gt; 作为主分支了。&lt;/p&gt;
&lt;h2 id=&#34;注意事项与协作者指南&#34;&gt;&lt;a href=&#34;#注意事项与协作者指南&#34; class=&#34;headerlink&#34; title=&#34;注意事项与协作者指南&#34;&gt;&lt;/a&gt;注意事项与协作者指南&lt;/h2&gt;&lt;p&gt;如果你的项目是多人协作的，请务必通知所有成员，并让他们在自己的本地仓库执行以下命令来同步变更：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;# 1. 切换到旧的 master 分支
git checkout master

# 2. 从远程拉取最新的分支结构信息
git fetch origin

# 3. 将本地的 master 也重命名为 main
git branch -m master main

# 4. 重新设置本地 main 分支去跟踪远程的 main 分支
git branch --set-upstream-to=origin/main main

# 5. (推荐) 清理本地无效的远程跟踪分支
git remote prune origin
&lt;/code&gt;&lt;/pre&gt;
</content>
        <category term="教程" />
        <category term="Git" />
        <category term="GitHub" />
        <category term="版本控制" />
        <updated>2025-06-26T01:15:00.000Z</updated>
    </entry>
</feed>
