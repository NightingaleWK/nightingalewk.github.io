{
    "version": "https://jsonfeed.org/version/1",
    "title": "雪漫城的风宅 • All posts by \"github\" tag",
    "description": "この世界は好都合に未完成 だから知りたいんだ —— チ。-地球の運動について-",
    "home_page_url": "https://nightingalewk.cn",
    "items": [
        {
            "id": "https://nightingalewk.cn/2026/01/24/84.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88Git%20%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%9A%E6%9C%BA%E5%BC%80%E5%8F%91%E7%AF%87%EF%BC%89/",
            "url": "https://nightingalewk.cn/2026/01/24/84.%20Laravel%20Sail%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B8%80%E6%8A%8A%E8%BF%87%EF%BC%88Git%20%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%A4%9A%E6%9C%BA%E5%BC%80%E5%8F%91%E7%AF%87%EF%BC%89/",
            "title": "Laravel Sail 开发环境部署一把过（Git 同步与多机开发篇）",
            "date_published": "2026-01-24T02:00:00.000Z",
            "content_html": "<h1 id=\"场景描述\"><a href=\"#场景描述\" class=\"headerlink\" title=\"场景描述\"></a>场景描述</h1><p>上一篇我们成功在电脑 A（比如公司电脑）上搭建了环境并运行了 Laravel。<br>现在的问题是：<strong>我下班回家了，想用家里的电脑 B 接着写，该怎么办？</strong></p>\n<p>很多人会卡在这里，因为 Laravel 项目默认的 <code>.gitignore</code> 规则会忽略 <code>vendor</code> 目录（存放依赖包的地方）和 <code>.env</code> 文件（存放敏感配置的地方）。<br>而 <code>sail</code> 命令脚本本身就躺在 <code>vendor/bin</code> 目录下。</p>\n<p>这意味着：<strong>当你把代码拉到新电脑上时，你没有 <code>vendor</code> 目录，也就没有 <code>sail</code> 命令。你无法启动 Sail，也就无法用 Sail 安装 <code>vendor</code>……</strong></p>\n<p>这就陷入了一个“先有鸡还是先有蛋”的死循环。<br>别慌，本文就是为了解决这个问题而生的。</p>\n<hr>\n<h1 id=\"第一步：在电脑-A-提交代码\"><a href=\"#第一步：在电脑-A-提交代码\" class=\"headerlink\" title=\"第一步：在电脑 A 提交代码\"></a>第一步：在电脑 A 提交代码</h1><p>首先，我们需要把项目上传到代码仓库（GitHub &#x2F; GitLab &#x2F; Gitee）。这里以 GitHub 为例。</p>\n<p>确保你在 WSL 的项目根目录下（比如 <code>~/code/example-app</code>）：</p>\n<ol>\n<li><p><strong>初始化 Git 仓库</strong>（如果还没初始化）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git checkout -b main</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>提交代码</strong>：<br>Laravel 默认的 <code>.gitignore</code> 已经非常完善了，千万<strong>不要</strong>手动去把 <code>vendor</code> 或 <code>.env</code> 强行加进来。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;Initial commit&quot;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>推送到远程仓库</strong>：<br>先在 GitHub 创建一个空仓库，然后关联并推送：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin git@github.com:your-username/your-repo.git</span><br><span class=\"line\">git push -u origin main</span><br></pre></td></tr></table></figure></li>\n</ol>\n<hr>\n<h1 id=\"第二步：在电脑-B-拉取代码\"><a href=\"#第二步：在电脑-B-拉取代码\" class=\"headerlink\" title=\"第二步：在电脑 B 拉取代码\"></a>第二步：在电脑 B 拉取代码</h1><p>现在我们来到了<strong>电脑 B</strong>（比如家里的电脑）。<br><strong>前提</strong>：这台电脑也必须安装好 <strong>WSL2</strong> 和 <strong>Docker Desktop</strong>（参考上一篇教程）。</p>\n<ol>\n<li><p><strong>克隆代码</strong>：<br>打开 Ubuntu 终端，进入我们规定的代码存放目录（如果不存在则先创建）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/code</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/code</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> git@github.com:your-username/your-repo.git project-b</span><br><span class=\"line\"><span class=\"built_in\">cd</span> project-b</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>此时的尴尬现状</strong>：<br>如果你现在尝试运行 <code>./vendor/bin/sail up</code>，系统会无情地告诉你：</p>\n<blockquote>\n<p><code>bash: ./vendor/bin/sail: No such file or directory</code></p>\n</blockquote>\n<p>原因前面说了：Git 不会同步 <code>vendor</code> 目录。</p>\n</li>\n</ol>\n<hr>\n<h1 id=\"第三步：解决“鸡生蛋”问题（安装依赖）\"><a href=\"#第三步：解决“鸡生蛋”问题（安装依赖）\" class=\"headerlink\" title=\"第三步：解决“鸡生蛋”问题（安装依赖）\"></a>第三步：解决“鸡生蛋”问题（安装依赖）</h1><p>我们需要在没有 <code>sail</code> 的情况下，利用 Docker 帮我们运行一次 Composer 安装命令。<br>Laravel 官方非常贴心地提供了一个一次性的 Docker 运行命令，专门用来处理这个“初次引导”的问题。</p>\n<p>在项目根目录下，执行下面这行<strong>神奇的长命令</strong>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --<span class=\"built_in\">rm</span> \\</span><br><span class=\"line\">    -u <span class=\"string\">&quot;<span class=\"subst\">$(id -u)</span>:<span class=\"subst\">$(id -g)</span>&quot;</span> \\</span><br><span class=\"line\">    -v <span class=\"string\">&quot;<span class=\"subst\">$(pwd)</span>:/var/www/html&quot;</span> \\</span><br><span class=\"line\">    -w /var/www/html \\</span><br><span class=\"line\">    laravelsail/php82-composer:latest \\</span><br><span class=\"line\">    composer install --ignore-platform-reqs</span><br></pre></td></tr></table></figure>\n\n<p><em>解析：</em></p>\n<ul>\n<li>这是一个临时的 Docker 容器，用完即焚 (<code>--rm</code>)。</li>\n<li>它挂载了当前目录 (<code>-v</code>)，并使用当前用户的权限 (<code>-u</code>)。</li>\n<li>它使用的是 <code>php82-composer</code> 镜像（如果你用的是 PHP 8.1 或 8.0，改一下数字即可）。</li>\n<li>它执行了 <code>composer install</code>，帮我们把 <code>vendor</code> 目录及里面的 <code>sail</code> 脚本都下载回来了！</li>\n</ul>\n<p><strong>等待命令执行完成</strong>（具体取决于网速），你会发现项目里多了一个 <code>vendor</code> 文件夹。</p>\n<hr>\n<h1 id=\"第四步：配置环境与启动\"><a href=\"#第四步：配置环境与启动\" class=\"headerlink\" title=\"第四步：配置环境与启动\"></a>第四步：配置环境与启动</h1><ol>\n<li><p><strong>恢复配置文件</strong>：<br>由于 <code>.env</code> 被 Git 忽略了，我们需要从模版复制一份：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cp</span> .env.example .<span class=\"built_in\">env</span></span><br></pre></td></tr></table></figure>\n<p><em>注意：如果你的项目有特殊的数据库密码或 API Key，记得手动编辑 <code>.env</code> 填进去。但在 Sail 环境下，数据库连接通常默认都在 <code>docker-compose.yml</code> 里配置好了环境变量，直接用可能就行。</em></p>\n</li>\n<li><p><strong>启动 Sail</strong>：<br>现在 <code>vendor</code> 有了，我们终于可以召唤神龙了（记得像上一篇一样配置好 <code>sail</code> 别名）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail up -d</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>生成应用密钥</strong>：<br>新的 <code>.env</code> 里 <code>APP_KEY</code> 是空的，需要生成一个：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail artisan key:generate</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>运行数据库迁移</strong>：<br>全新的环境数据库是空的，需要创建表结构：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sail artisan migrate</span><br></pre></td></tr></table></figure></li>\n</ol>\n<hr>\n<h1 id=\"第五步：验证\"><a href=\"#第五步：验证\" class=\"headerlink\" title=\"第五步：验证\"></a>第五步：验证</h1><p>打开浏览器访问 <code>http://localhost</code>。<br>你应该能看到与公司电脑一模一样的项目已经在运行了。</p>\n<p>从此以后，你只需要：</p>\n<ul>\n<li><strong>在公司</strong>：写代码 -&gt; <code>git push</code></li>\n<li><strong>在家里</strong>：<code>git pull</code> -&gt; <code>./vendor/bin/sail up -d</code> -&gt; 开造！</li>\n</ul>\n<p><strong>这就是 Docker + Sail 带来的极致一致性体验。</strong></p>\n<hr>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>本篇解决了异地开发最麻烦的“环境同步”和“依赖安装”问题。<br>核心技巧在于那行<strong>用于“引导”的 Docker 命令</strong>，它帮我们跨越了“没有 PHP 环境就没法安装 Sail，没有 Sail 就没法启动 PHP 环境”的鸿沟。</p>\n<p>下一篇，我们将进入实战深水区：<strong>《日常使用篇》</strong>，教你如何像在本地一样运行 Artisan 命令、使用 npm 编译前端、以及配置 Shell 别名让 <code>sail</code> 变成更短的 <code>s</code>。</p>\n",
            "tags": [
                "Git",
                "GitHub",
                "Laravel",
                "Sail"
            ]
        },
        {
            "id": "https://nightingalewk.cn/2025/06/26/74.%20%E4%BF%AE%E6%94%B9%E7%BA%BF%E4%B8%8A%20git%20%E4%BB%93%E5%BA%93%20master%20%E4%B8%BB%E5%88%86%E6%94%AF%E4%B8%BA%20main/",
            "url": "https://nightingalewk.cn/2025/06/26/74.%20%E4%BF%AE%E6%94%B9%E7%BA%BF%E4%B8%8A%20git%20%E4%BB%93%E5%BA%93%20master%20%E4%B8%BB%E5%88%86%E6%94%AF%E4%B8%BA%20main/",
            "title": "如何将 Git 仓库的默认分支从 master 修改为 main",
            "date_published": "2025-06-26T01:15:00.000Z",
            "content_html": "<p>随着技术社区对包容性语言的倡导，将 Git 仓库的默认分支从 <code>master</code> 修改为 <code>main</code> 已成为一种普遍的推荐做法。本文将提供一个详细、安全的操作指南，帮助你顺利完成这一迁移。</p>\n<p>整个过程主要分为四个核心步骤，外加一个针对团队协作的同步步骤。我们将依次进行操作，确保万无一失。</p>\n<h2 id=\"1-重命名本地分支\"><a href=\"#1-重命名本地分支\" class=\"headerlink\" title=\"1. 重命名本地分支\"></a>1. 重命名本地分支</h2><p>首先，我们需要在本地的 Git 仓库中进行操作。打开你的项目终端或命令行工具。</p>\n<ol>\n<li><p><strong>切换到 <code>master</code> 分支并拉取最新代码</strong>，确保本地与远程是同步的。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout master</span><br><span class=\"line\">git pull origin master</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>使用 <code>-m</code> (<code>--move</code>) 参数重命名分支</strong>。这将把本地的 <code>master</code> 分支直接更名为 <code>main</code>。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch -m master main</span><br></pre></td></tr></table></figure>\n<p>执行后，你的本地主分支名就修改完成了。</p>\n</li>\n</ol>\n<h2 id=\"2-推送新分支到远程仓库\"><a href=\"#2-推送新分支到远程仓库\" class=\"headerlink\" title=\"2. 推送新分支到远程仓库\"></a>2. 推送新分支到远程仓库</h2><p>本地分支改名后，需要将这个新的 <code>main</code> 分支推送到你的远程仓库（如 GitHub 或 GitLab），并建立跟踪关系。</p>\n<ol>\n<li><strong>推送 <code>main</code> 分支</strong>。使用 <code>-u</code> (<code>--set-upstream</code>) 参数，这样 Git 会记住本地 <code>main</code> 分支对应远程的 <code>main</code> 分支，方便以后直接使用 <code>git push</code> 和 <code>git pull</code>。<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push -u origin main</span><br></pre></td></tr></table></figure>\n此时，你的远程仓库会同时存在 <code>master</code> 和 <code>main</code> 两个分支，它们的内容完全相同。</li>\n</ol>\n<h2 id=\"3-修改平台的默认分支（关键步骤）\"><a href=\"#3-修改平台的默认分支（关键步骤）\" class=\"headerlink\" title=\"3. 修改平台的默认分支（关键步骤）\"></a>3. 修改平台的默认分支（关键步骤）</h2><p>这是整个流程中最关键的一步，必须在代码托管平台的网页上完成。**只有修改了默认分支，新的克隆 (clone) 和拉取请求 (Pull Request) 才会默认指向 <code>main</code>**。</p>\n<p>以 <strong>GitHub</strong> 为例：</p>\n<ol>\n<li>进入你的仓库主页，点击右上角的 <strong>Settings</strong> (设置)。</li>\n<li>在左侧菜单栏找到并点击 <strong>Branches</strong> (分支)。</li>\n<li>在 “Default branch” (默认分支) 区域，点击切换按钮（通常是两个箭头图标）。</li>\n<li>在弹出的窗口中，将默认分支从 <code>master</code> 选为 <code>main</code>，然后点击 <strong>Update</strong> 确认。</li>\n</ol>\n<p>其他平台（如 GitLab, Gitee）的操作也类似，通常都在仓库的“设置”或“仓库管理”中的“分支”选项里。</p>\n<h2 id=\"4-清理远程的-master-分支\"><a href=\"#4-清理远程的-master-分支\" class=\"headerlink\" title=\"4. 清理远程的 master 分支\"></a>4. 清理远程的 master 分支</h2><p>在确认 <code>main</code> 已成为默认分支，并且所有相关的自动化流程（如 CI&#x2F;CD）都已更新后，你就可以安全地删除远程的 <code>master</code> 分支了，以避免团队成员产生混淆。</p>\n<ol>\n<li><strong>执行删除命令</strong>：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin --delete master</span><br></pre></td></tr></table></figure></li>\n</ol>\n<p>至此，你的仓库就完全迁移到 <code>main</code> 作为主分支了。</p>\n<h2 id=\"注意事项与协作者指南\"><a href=\"#注意事项与协作者指南\" class=\"headerlink\" title=\"注意事项与协作者指南\"></a>注意事项与协作者指南</h2><p>如果你的项目是多人协作的，请务必通知所有成员，并让他们在自己的本地仓库执行以下命令来同步变更：</p>\n<pre><code class=\"bash\"># 1. 切换到旧的 master 分支\ngit checkout master\n\n# 2. 从远程拉取最新的分支结构信息\ngit fetch origin\n\n# 3. 将本地的 master 也重命名为 main\ngit branch -m master main\n\n# 4. 重新设置本地 main 分支去跟踪远程的 main 分支\ngit branch --set-upstream-to=origin/main main\n\n# 5. (推荐) 清理本地无效的远程跟踪分支\ngit remote prune origin\n</code></pre>\n",
            "tags": [
                "教程",
                "Git",
                "GitHub",
                "版本控制"
            ]
        }
    ]
}